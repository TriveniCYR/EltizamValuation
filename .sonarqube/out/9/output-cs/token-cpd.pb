ˇ
OD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Helper\ApplicationConstants.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Helper# )
{ 
public 

static 
class  
ApplicationConstants ,
{ 
public 
const 
string 
LANG_ENG $
=% &
$str' +
;+ ,
public 
const 
string 
LANG_AR #
=$ %
$str& *
;* +
public		 
const		 
string		 

PageNumber		 &
=		' (
$str		) 5
;		5 6
public

 
const

 
string

 
PageSize

 $
=

% &
$str

' 1
;

1 2
public 
const 
string 
OrderClause '
=( )
$str* 7
;7 8
public 
const 
string 
ReverseSort '
=( )
$str* 7
;7 8
public 
const 
string 
	CreatedBy %
=& '
$str( 3
;3 4
public 
const 
string 
UserId "
=# $
$str% -
;- .
public 
const 
string 
RoleId "
=# $
$str% -
;- .
public 
const 
string 
BranchId $
=% &
$str' 1
;1 2
public 
const 
string 
IsActive $
=% &
$str' 1
;1 2
public 
const 
string 
Letter "
=# $
$str% -
;- .
public 
const 
string 
Id 
=  
$str! %
;% &
public 
const 
string 
AccountNumber )
=* +
$str, ;
;; <
public 
const 
string 
success #
=$ %
$str& /
;/ 0
public 
const 
string 
fail  
=! "
$str# )
;) *
public 
const 
string 
successMessage *
=+ ,
$str- Y
;Y Z
public 
static 
string 
Dateformat1 (
=) *
DateTime+ 3
.3 4
Now4 7
.7 8
ToString8 @
(@ A
$strA K
)K L
;L M
public 
const 
string 
Branch "
=# $
$str% -
;- .
public 
const 
string 
Supplier $
=% &
$str' 1
;1 2
public 
const 
string 
Customer $
=% &
$str' 1
;1 2
public 
const 
string 
User  
=! "
$str# )
;) *
}   
public'' 

static'' 
class'' 
AccountType'' #
{(( 
public)) 
const)) 
string)) 
Account_Cash)) (
=))) *
$str))+ 0
;))0 1
public** 
const** 
string** 
Account_NonCash** +
=**, -
$str**. 3
;**3 4
public++ 
const++ 
string++ 
Account_Purchase++ ,
=++- .
$str++/ 4
;++4 5
public,, 
const,, 
string,, 
Account_Deposit,, +
=,,, -
$str,,. 3
;,,3 4
}-- 
}.. ã1
LD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Helper\ApplicationHelper.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Helper# )
{ 
public		 

static		 
class		 
ApplicationHelper		 )
{

 
public 
static 
string 
ConnectionStringkey 0
=1 2
$str3 T
;T U
private 
readonly 
static 
Random  &
r' (
=) *
new+ .
Random/ 5
(5 6
)6 7
;7 8
static 
string 
	alphaCaps 
=  !
$str" >
;> ?
static 
string 
alphaLow 
=  
$str! =
;= >
static 
string 
numerics 
=  
$str! -
;- .
static 
string 
special 
= 
$str  (
;( )
static 
string 
allChars 
=  
	alphaCaps! *
++ ,
alphaLow- 5
+6 7
numerics8 @
+A B
specialC J
;J K
public 
static 
string "
GenerateRandomPassword 3
(3 4
int4 7
length8 >
=? @
$numA C
)C D
{ 	
string 
generatedPassword $
=% &
$str' )
;) *
int 
	lowerpass 
, 
	upperpass $
,$ %
numpass& -
,- .
specialchar/ :
;: ;
string 
posarray 
= 
$str *
;* +
if 
( 
length 
< 
posarray !
.! "
Length" (
)( )
posarray   
=   
posarray   #
.  # $
	Substring  $ -
(  - .
$num  . /
,  / 0
length  1 7
)  7 8
;  8 9
	lowerpass"" 
="" 
getRandomPosition"" )
("") *
ref""* -
posarray"". 6
)""6 7
;""7 8
	upperpass## 
=## 
getRandomPosition## )
(##) *
ref##* -
posarray##. 6
)##6 7
;##7 8
numpass$$ 
=$$ 
getRandomPosition$$ '
($$' (
ref$$( +
posarray$$, 4
)$$4 5
;$$5 6
specialchar%% 
=%% 
getRandomPosition%% +
(%%+ ,
ref%%, /
posarray%%0 8
)%%8 9
;%%9 :
for'' 
('' 
int'' 
i'' 
='' 
$num'' 
;'' 
i'' 
<'' 
length''  &
;''& '
i''( )
++'') +
)''+ ,
{(( 
if)) 
()) 
i)) 
==)) 
	lowerpass)) "
)))" #
generatedPassword** %
+=**& (
getRandomChar**) 6
(**6 7
	alphaCaps**7 @
)**@ A
;**A B
else++ 
if++ 
(++ 
i++ 
==++ 
	upperpass++ '
)++' (
generatedPassword,, %
+=,,& (
getRandomChar,,) 6
(,,6 7
alphaLow,,7 ?
),,? @
;,,@ A
else-- 
if-- 
(-- 
i-- 
==-- 
numpass-- %
)--% &
generatedPassword.. %
+=..& (
getRandomChar..) 6
(..6 7
numerics..7 ?
)..? @
;..@ A
else// 
if// 
(// 
i// 
==// 
specialchar// )
)//) *
generatedPassword00 %
+=00& (
getRandomChar00) 6
(006 7
special007 >
)00> ?
;00? @
else11 
generatedPassword22 %
+=22& (
getRandomChar22) 6
(226 7
allChars227 ?
)22? @
;22@ A
}33 
return66 
generatedPassword66 $
;66$ %
}77 	
private>> 
static>> 
string>> 
getRandomChar>> +
(>>+ ,
string>>, 2

fullString>>3 =
)>>= >
{?? 	
return@@ 

fullString@@ 
.@@ 
ToCharArray@@ )
(@@) *
)@@* +
[@@+ ,
(@@, -
int@@- 0
)@@0 1
Math@@1 5
.@@5 6
Floor@@6 ;
(@@; <
r@@< =
.@@= >

NextDouble@@> H
(@@H I
)@@I J
*@@K L

fullString@@M W
.@@W X
Length@@X ^
)@@^ _
]@@_ `
.@@` a
ToString@@a i
(@@i j
)@@j k
;@@k l
}AA 	
privateHH 
staticHH 
intHH 
getRandomPositionHH ,
(HH, -
refHH- 0
stringHH1 7
posArrayHH8 @
)HH@ A
{II 	
intJJ 
posJJ 
;JJ 
stringKK 

randomCharKK 
=KK 
posArrayKK  (
.KK( )
ToCharArrayKK) 4
(KK4 5
)KK5 6
[KK6 7
(KK7 8
intKK8 ;
)KK; <
MathKK< @
.KK@ A
FloorKKA F
(KKF G
rKKG H
.KKH I

NextDoubleKKI S
(KKS T
)KKT U
*KKV W
posArrayKKX `
.KK` a
LengthKKa g
)KKg h
]KKh i
.KKi j
ToStringKKj r
(KKr s
)KKs t
;KKt u
posLL 
=LL 
intLL 
.LL 
ParseLL 
(LL 

randomCharLL &
)LL& '
;LL' (
posArrayMM 
=MM 
posArrayMM 
.MM  
ReplaceMM  '
(MM' (

randomCharMM( 2
,MM2 3
$strMM4 6
)MM6 7
;MM7 8
returnNN 
posNN 
;NN 
}OO 	
}PP 
}QQ á4
JD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Helper\DataTableHelper.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Helper# )
{		 
public 

class 
DataTableHelper  
{ 
public 
static 
List 
< 
T 
> 
ToList $
<$ %
T% &
>& '
(' (
	DataTable( 1
dt2 4
)4 5
{ 	
List 
< 
T 
> 
data 
= 
new 
List #
<# $
T$ %
>% &
(& '
)' (
;( )
foreach 
( 
DataRow 
row  
in! #
dt$ &
.& '
Rows' +
)+ ,
{ 
T 
item 
= 
GetItem  
<  !
T! "
>" #
(# $
row$ '
)' (
;( )
data 
. 
Add 
( 
item 
) 
; 
} 
return 
data 
; 
} 	
public"" 
static"" 
	DataTable"" 
ToDataTable""  +
<""+ ,
T"", -
>""- .
("". /
List""/ 3
<""3 4
T""4 5
>""5 6
items""7 <
)""< =
{## 	
	DataTable$$ 
	dataTable$$ 
=$$  !
new$$" %
	DataTable$$& /
($$/ 0
typeof$$0 6
($$6 7
T$$7 8
)$$8 9
.$$9 :
Name$$: >
)$$> ?
;$$? @
PropertyInfo'' 
['' 
]'' 
Props''  
=''! "
typeof''# )
('') *
T''* +
)''+ ,
.'', -
GetProperties''- :
('': ;
BindingFlags''; G
.''G H
Public''H N
|''O P
BindingFlags''Q ]
.''] ^
Instance''^ f
)''f g
;''g h
foreach(( 
((( 
PropertyInfo(( !
prop((" &
in((' )
Props((* /
)((/ 0
{)) 
var++ 
type++ 
=++ 
(++ 
prop++  
.++  !
PropertyType++! -
.++- .
IsGenericType++. ;
&&++< >
prop++? C
.++C D
PropertyType++D P
.++P Q$
GetGenericTypeDefinition++Q i
(++i j
)++j k
==++l n
typeof++o u
(++u v
Nullable++v ~
<++~ 
>	++ Ä
)
++Ä Å
?
++Ç É
Nullable,, $
.,,$ %
GetUnderlyingType,,% 6
(,,6 7
prop,,7 ;
.,,; <
PropertyType,,< H
),,H I
:,,J K
prop,,L P
.,,P Q
PropertyType,,Q ]
),,] ^
;,,^ _
	dataTable// 
.// 
Columns// !
.//! "
Add//" %
(//% &
prop//& *
.//* +
Name//+ /
,/// 0
type//1 5
)//5 6
;//6 7
}00 
foreach11 
(11 
T11 
item11 
in11 
items11 $
)11$ %
{22 
var33 
values33 
=33 
new33  
object33! '
[33' (
Props33( -
.33- .
Length33. 4
]334 5
;335 6
for44 
(44 
int44 
i44 
=44 
$num44 
;44 
i44  !
<44" #
Props44$ )
.44) *
Length44* 0
;440 1
i442 3
++443 5
)445 6
{55 
values77 
[77 
i77 
]77 
=77 
Props77  %
[77% &
i77& '
]77' (
.77( )
GetValue77) 1
(771 2
item772 6
,776 7
null778 <
)77< =
;77= >
}88 
	dataTable99 
.99 
Rows99 
.99 
Add99 "
(99" #
values99# )
)99) *
;99* +
}:: 
return== 
	dataTable== 
;== 
}>> 	
public@@ 
static@@ 
	DataTable@@ 
RemoveColumn@@  ,
(@@, -
	DataTable@@- 6
table@@7 <
,@@< =
string@@> D

columnName@@E O
)@@O P
{AA 	
ifBB 
(BB 
tableBB 
.BB 
ColumnsBB 
.BB 
ContainsBB &
(BB& '

columnNameBB' 1
)BB1 2
)BB2 3
tableCC 
.CC 
ColumnsCC 
.CC 
RemoveCC $
(CC$ %

columnNameCC% /
)CC/ 0
;CC0 1
returnEE 
tableEE 
;EE 
}FF 	
privateHH 
staticHH 
THH 
GetItemHH  
<HH  !
THH! "
>HH" #
(HH# $
DataRowHH$ +
drHH, .
)HH. /
{II 	
TypeJJ 
tempJJ 
=JJ 
typeofJJ 
(JJ 
TJJ  
)JJ  !
;JJ! "
TKK 
objKK 
=KK 
	ActivatorKK 
.KK 
CreateInstanceKK ,
<KK, -
TKK- .
>KK. /
(KK/ 0
)KK0 1
;KK1 2
foreachMM 
(MM 

DataColumnMM 
columnMM  &
inMM' )
drMM* ,
.MM, -
TableMM- 2
.MM2 3
ColumnsMM3 :
)MM: ;
{NN 
foreachOO 
(OO 
PropertyInfoOO %
proOO& )
inOO* ,
tempOO- 1
.OO1 2
GetPropertiesOO2 ?
(OO? @
)OO@ A
)OOA B
{PP 
ifQQ 
(QQ 
proQQ 
.QQ 
NameQQ  
==QQ! #
columnQQ$ *
.QQ* +

ColumnNameQQ+ 5
)QQ5 6
proRR 
.RR 
SetValueRR $
(RR$ %
objRR% (
,RR( )
drRR* ,
[RR, -
columnRR- 3
.RR3 4

ColumnNameRR4 >
]RR> ?
,RR? @
nullRRA E
)RRE F
;RRF G
elseSS 
continueTT  
;TT  !
}UU 
}VV 
returnWW 
objWW 
;WW 
}XX 	
}YY 
}ZZ Æ5
OD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Helper\EncryptionDecryption.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
EncryptDecrypt# 1
{ 
public		 

static		 
class		  
EncryptionDecryption		 ,
{

 
public 
static 
string 
EncryptString *
(* +
string+ 1
	clearText2 ;
); <
{ 	
string 
EncryptionKey  
=! "
Environment# .
.. /"
GetEnvironmentVariable/ E
(E F
$strF `
)` a
?a b
.b c
ToStringc k
(k l
)l m
.m n
Lengthn t
>u v
$numw x
?z {
Environment	| á
.
á à$
GetEnvironmentVariable
à û
(
û ü
$str
ü π
)
π ∫
:
ª º
$str
Ω ø
;
ø ¿
byte 
[ 
] 

clearBytes 
= 
Encoding  (
.( )
Unicode) 0
.0 1
GetBytes1 9
(9 :
	clearText: C
)C D
;D E
using 
( 
Aes 
	encryptor  
=! "
Aes# &
.& '
Create' -
(- .
). /
)/ 0
{ 
var 
salt 
= 
Encoding #
.# $
UTF8$ (
.( )
GetBytes) 1
(1 2
$str	2 Ä
)
Ä Å
;
Å Ç
Rfc2898DeriveBytes "
pdb# &
=' (
new) ,
Rfc2898DeriveBytes- ?
(? @
EncryptionKey@ M
,M N
saltO S
)S T
;T U
	encryptor 
. 
Key 
= 
pdb  #
.# $
GetBytes$ ,
(, -
$num- /
)/ 0
;0 1
	encryptor 
. 
IV 
= 
pdb "
." #
GetBytes# +
(+ ,
$num, .
). /
;/ 0
using 
( 
MemoryStream #
ms$ &
=' (
new) ,
MemoryStream- 9
(9 :
): ;
); <
{ 
using 
( 
CryptoStream '
cs( *
=+ ,
new- 0
CryptoStream1 =
(= >
ms> @
,@ A
	encryptorB K
.K L
CreateEncryptorL [
([ \
)\ ]
,] ^
CryptoStreamMode_ o
.o p
Writep u
)u v
)v w
{ 
cs 
. 
Write  
(  !

clearBytes! +
,+ ,
$num- .
,. /

clearBytes0 :
.: ;
Length; A
)A B
;B C
cs 
. 
Close  
(  !
)! "
;" #
} 
	clearText 
= 
Convert  '
.' (
ToBase64String( 6
(6 7
ms7 9
.9 :
ToArray: A
(A B
)B C
)C D
;D E
} 
} 
return   
	clearText   
;   
}!! 	
public%% 
static%% 
string%% 
DecryptString%% *
(%%* +
string%%+ 1

cipherText%%2 <
)%%< =
{&& 	
string'' 
EncryptionKey''  
=''! "
Environment''# .
.''. /"
GetEnvironmentVariable''/ E
(''E F
$str''F `
)''` a
?''a b
.''b c
ToString''c k
(''k l
)''l m
.''m n
Length''n t
>''u v
$num''w x
?''y z
Environment	''{ Ü
.
''Ü á$
GetEnvironmentVariable
''á ù
(
''ù û
$str
''û ∏
)
''∏ π
:
''∫ ª
$str
''º æ
;
''æ ø
byte(( 
[(( 
](( 
cipherBytes(( 
=((  
Convert((! (
.((( )
FromBase64String(() 9
(((9 :

cipherText((: D
)((D E
;((E F
using)) 
()) 
Aes)) 
	encryptor))  
=))! "
Aes))# &
.))& '
Create))' -
())- .
))). /
)))/ 0
{** 
var++ 
salt++ 
=++ 
Encoding++ #
.++# $
UTF8++$ (
.++( )
GetBytes++) 1
(++1 2
$str	++2 Ä
)
++Ä Å
;
++Å Ç
Rfc2898DeriveBytes,, "
pdb,,# &
=,,' (
new,,) ,
Rfc2898DeriveBytes,,- ?
(,,? @
EncryptionKey,,@ M
,,,M N
salt,,O S
),,S T
;,,T U
	encryptor-- 
.-- 
Key-- 
=-- 
pdb--  #
.--# $
GetBytes--$ ,
(--, -
$num--- /
)--/ 0
;--0 1
	encryptor.. 
... 
IV.. 
=.. 
pdb.. "
..." #
GetBytes..# +
(..+ ,
$num.., .
)... /
;../ 0
using// 
(// 
MemoryStream// #
ms//$ &
=//' (
new//) ,
MemoryStream//- 9
(//9 :
)//: ;
)//; <
{00 
using11 
(11 
CryptoStream11 '
cs11( *
=11+ ,
new11- 0
CryptoStream111 =
(11= >
ms11> @
,11@ A
	encryptor11B K
.11K L
CreateDecryptor11L [
(11[ \
)11\ ]
,11] ^
CryptoStreamMode11_ o
.11o p
Write11p u
)11u v
)11v w
{22 
cs33 
.33 
Write33  
(33  !
cipherBytes33! ,
,33, -
$num33. /
,33/ 0
cipherBytes331 <
.33< =
Length33= C
)33C D
;33D E
cs44 
.44 
Close44  
(44  !
)44! "
;44" #
}55 

cipherText66 
=66  
Encoding66! )
.66) *
Unicode66* 1
.661 2
	GetString662 ;
(66; <
ms66< >
.66> ?
ToArray66? F
(66F G
)66G H
)66H I
;66I J
}77 
}88 
return99 

cipherText99 
;99 
}:: 	
};; 
}<< ¬∫
ED:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Helper\FJDBHelper.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Helper# )
{ 
public 

class 

FJDBHelper 
{ 
public 
static 
int 
timeout !
=" #
$num$ &
;& '
public 
static 
string 
TotalRecords )
=* +
$str, :
;: ;
public 
static 
void 
ExecuteNonQuery *
(* +
string+ 1
commandText2 =
,= >
string? E
	connStingF O
,O P
CommandTypeQ \
commandType] h
=i j
CommandTypek v
.v w
Textw {
,{ |
params+ 1
DbParameter2 =
[= >
]> ?
dbParameters@ L
)L M
{ 	
using 
( 
var 
dbConnection #
=$ %
CommonDb& .
.. /
CreateDbConnection/ A
(A B
	connStingB K
)K L
)L M
{ 
using 
( 
var 
	dbCommand $
=% &
dbConnection' 3
.3 4
CreateCommand4 A
(A B
)B C
)C D
{ 
	dbCommand 
. 
CommandType )
=* +
commandType, 7
;7 8
	dbCommand 
. 
CommandText )
=* +
commandText, 7
;7 8
	dbCommand 
. 
CommandTimeout ,
=- .
timeout/ 6
;6 7
if 
( 
dbParameters $
!=% '
null( ,
), -
{ 
foreach 
(  !
var! $
dbParameter% 0
in1 3
dbParameters4 @
)@ A
{ 
	dbCommand   %
.  % &

Parameters  & 0
.  0 1
Add  1 4
(  4 5
dbParameter  5 @
)  @ A
;  A B
}!! 
}"" 
dbConnection$$  
.$$  !
Open$$! %
($$% &
)$$& '
;$$' (
	dbCommand%% 
.%% 
ExecuteNonQuery%% -
(%%- .
)%%. /
;%%/ 0
}&& 
}'' 
}(( 	
public)) 
static)) 
void)) &
ExecuteNonQueryWithTimeOut)) 5
())5 6
string))6 <
commandText))= H
,))H I
string))J P
	connSting))Q Z
,))Z [
int))\ _
conntimeOut))` k
,))k l
CommandType** 
commandType** '
=**( )
CommandType*** 5
.**5 6
Text**6 :
,**: ;
params**< B
DbParameter**C N
[**N O
]**O P
dbParameters**Q ]
)**] ^
{++ 	
using,, 
(,, 
var,, 
dbConnection,, #
=,,$ %
CommonDb,,& .
.,,. /
CreateDbConnection,,/ A
(,,A B
	connSting,,B K
),,K L
),,L M
{-- 
using.. 
(.. 
var.. 
	dbCommand.. $
=..% &
dbConnection..' 3
...3 4
CreateCommand..4 A
(..A B
)..B C
)..C D
{// 
	dbCommand00 
.00 
CommandType00 )
=00* +
commandType00, 7
;007 8
	dbCommand11 
.11 
CommandText11 )
=11* +
commandText11, 7
;117 8
	dbCommand22 
.22 
CommandTimeout22 ,
=22- .
conntimeOut22/ :
;22: ;
if44 
(44 
dbParameters44 $
!=44% '
null44( ,
)44, -
{55 
foreach66 
(66  !
var66! $
dbParameter66% 0
in661 3
dbParameters664 @
)66@ A
{77 
	dbCommand88 %
.88% &

Parameters88& 0
.880 1
Add881 4
(884 5
dbParameter885 @
)88@ A
;88A B
}99 
}:: 
dbConnection<<  
.<<  !
Open<<! %
(<<% &
)<<& '
;<<' (
	dbCommand== 
.== 
ExecuteNonQuery== -
(==- .
)==. /
;==/ 0
}>> 
}?? 
}@@ 	
publicCC 
staticCC 
ListCC 
<CC 
TCC 
>CC 
ExecuteMappedReaderCC 1
<CC1 2
TCC2 3
>CC3 4
(CC4 5
stringCC5 ;
commandTextCC< G
,CCG H
stringCCI O
	connStingCCP Y
,CCY Z
CommandTypeCC[ f
commandTypeCCg r
=CCs t
CommandType	CCu Ä
.
CCÄ Å
Text
CCÅ Ö
,
CCÖ Ü
params
CCá ç
DbParameter
CCé ô
[
CCô ö
]
CCö õ
dbParameters
CCú ®
)
CC® ©
where
CC™ Ø
T
CC∞ ±
:
CC≤ ≥
new
CC¥ ∑
(
CC∑ ∏
)
CC∏ π
{DD 	
usingEE 
(EE 
SqlConnectionEE  
dbConnectionEE! -
=EE. /
newEE0 3
SqlConnectionEE4 A
(EEA B
	connStingEEB K
)EEK L
)EEL M
{FF 
usingGG 
(GG 

SqlCommandGG !
	dbCommandGG" +
=GG, -
newGG. 1

SqlCommandGG2 <
(GG< =
commandTextGG= H
,GGH I
dbConnectionGGJ V
)GGV W
)GGW X
{HH 
	dbCommandII 
.II 
CommandTypeII )
=II* +
commandTypeII, 7
;II7 8
	dbCommandJJ 
.JJ 
CommandTextJJ )
=JJ* +
commandTextJJ, 7
;JJ7 8
	dbCommandKK 
.KK 
CommandTimeoutKK ,
=KK- .
timeoutKK/ 6
;KK6 7
ifLL 
(LL 
dbParametersLL $
!=LL% '
nullLL( ,
)LL, -
{MM 
foreachNN 
(NN  !
varNN! $
dbParameterNN% 0
inNN1 3
dbParametersNN4 @
)NN@ A
{OO 
CommonDbPP $
.PP$ %
AddParameterPP% 1
(PP1 2
	dbCommandPP2 ;
,PP; <
dbParameterPP= H
.PPH I
NamePPI M
,PPM N
dbParameterPPO Z
.PPZ [
ValuePP[ `
,PP` a
dbParameterPPb m
.PPm n
	FieldTypePPn w
)PPw x
;PPx y
}QQ 
}RR 
dbConnectionTT  
.TT  !
OpenTT! %
(TT% &
)TT& '
;TT' (
SqlDataReaderUU !
drUU" $
=UU% &
	dbCommandUU' 0
.UU0 1
ExecuteReaderUU1 >
(UU> ?
)UU? @
;UU@ A
returnVV  
DataReaderExtensionsVV /
.VV/ 0
	MapToListVV0 9
<VV9 :
TVV: ;
>VV; <
(VV< =
drVV= ?
)VV? @
;VV@ A
}WW 
}XX 
}YY 	
public[[ 
static[[ 
T[[ %
ExecuteSingleMappedReader[[ 1
<[[1 2
T[[2 3
>[[3 4
([[4 5
string[[5 ;
commandText[[< G
,[[G H
string[[I O
	connSting[[P Y
,[[Y Z
CommandType[[[ f
commandType[[g r
=[[s t
CommandType	[[u Ä
.
[[Ä Å
Text
[[Å Ö
,
[[Ö Ü
params
[[á ç
DbParameter
[[é ô
[
[[ô ö
]
[[ö õ
dbParameters
[[ú ®
)
[[® ©
where
[[™ Ø
T
[[∞ ±
:
[[≤ ≥
new
[[¥ ∑
(
[[∑ ∏
)
[[∏ π
{\\ 	
using]] 
(]] 
SqlConnection]]  
dbConnection]]! -
=]]. /
new]]0 3
SqlConnection]]4 A
(]]A B
	connSting]]B K
)]]K L
)]]L M
{^^ 
using__ 
(__ 

SqlCommand__ !
	dbCommand__" +
=__, -
new__. 1

SqlCommand__2 <
(__< =
commandText__= H
,__H I
dbConnection__J V
)__V W
)__W X
{`` 
	dbCommandaa 
.aa 
CommandTypeaa )
=aa* +
commandTypeaa, 7
;aa7 8
	dbCommandbb 
.bb 
CommandTextbb )
=bb* +
commandTextbb, 7
;bb7 8
	dbCommandcc 
.cc 
CommandTimeoutcc ,
=cc- .
timeoutcc/ 6
;cc6 7
ifdd 
(dd 
dbParametersdd $
!=dd% '
nulldd( ,
)dd, -
{ee 
foreachff 
(ff  !
varff! $
dbParameterff% 0
inff1 3
dbParametersff4 @
)ff@ A
{gg 
CommonDbhh $
.hh$ %
AddParameterhh% 1
(hh1 2
	dbCommandhh2 ;
,hh; <
dbParameterhh= H
.hhH I
NamehhI M
,hhM N
dbParameterhhO Z
.hhZ [
Valuehh[ `
,hh` a
dbParameterhhb m
.hhm n
	FieldTypehhn w
)hhw x
;hhx y
}ii 
}jj 
dbConnectionll  
.ll  !
Openll! %
(ll% &
)ll& '
;ll' (
SqlDataReadermm !
drmm" $
=mm% &
	dbCommandmm' 0
.mm0 1
ExecuteReadermm1 >
(mm> ?
)mm? @
;mm@ A
returnnn  
DataReaderExtensionsnn /
.nn/ 0
MapToSinglenn0 ;
<nn; <
Tnn< =
>nn= >
(nn> ?
drnn? A
)nnA B
;nnB C
}oo 
}pp 
}qq 	
publicss 
staticss 
voidss 
ExecuteReaderss (
(ss( )
stringss) /
commandTextss0 ;
,ss; <
stringss= C
	connStingssD M
,ssM N
ActionssO U
<ssU V
IDataReaderssV a
>ssa b
recordHandlerssc p
,ssp q
CommandTypett #
commandTypett$ /
=tt0 1
CommandTypett2 =
.tt= >
Texttt> B
,ttB C
paramsttD J
DbParameterttK V
[ttV W
]ttW X
dbParametersttY e
)tte f
{uu 	
usingvv 
(vv 
varvv 
dbConnectionvv #
=vv$ %
CommonDbvv& .
.vv. /
CreateDbConnectionvv/ A
(vvA B
	connStingvvB K
)vvK L
)vvL M
{ww 
usingxx 
(xx 
varxx 
	dbCommandxx $
=xx% &
dbConnectionxx' 3
.xx3 4
CreateCommandxx4 A
(xxA B
)xxB C
)xxC D
{yy 
	dbCommandzz 
.zz 
CommandTypezz )
=zz* +
commandTypezz, 7
;zz7 8
	dbCommand{{ 
.{{ 
CommandText{{ )
={{* +
commandText{{, 7
;{{7 8
	dbCommand|| 
.|| 
CommandTimeout|| ,
=||- .
timeout||/ 6
;||6 7
if}} 
(}} 
dbParameters}} $
!=}}% '
null}}( ,
)}}, -
{~~ 
foreach 
(  !
var! $
dbParameter% 0
in1 3
dbParameters4 @
)@ A
{
ÄÄ 
CommonDb
ÅÅ $
.
ÅÅ$ %
AddParameter
ÅÅ% 1
(
ÅÅ1 2
	dbCommand
ÅÅ2 ;
,
ÅÅ; <
dbParameter
ÅÅ= H
.
ÅÅH I
Name
ÅÅI M
,
ÅÅM N
dbParameter
ÅÅO Z
.
ÅÅZ [
Value
ÅÅ[ `
,
ÅÅ` a
dbParameter
ÅÅb m
.
ÅÅm n
	FieldType
ÅÅn w
)
ÅÅw x
;
ÅÅx y
}
ÇÇ 
}
ÉÉ 
dbConnection
ÖÖ  
.
ÖÖ  !
Open
ÖÖ! %
(
ÖÖ% &
)
ÖÖ& '
;
ÖÖ' (
var
ÜÜ 
reader
ÜÜ 
=
ÜÜ  
	dbCommand
ÜÜ! *
.
ÜÜ* +
ExecuteReader
ÜÜ+ 8
(
ÜÜ8 9
)
ÜÜ9 :
;
ÜÜ: ;
while
áá 
(
áá 
reader
áá !
.
áá! "
Read
áá" &
(
áá& '
)
áá' (
)
áá( )
{
àà 
recordHandler
ââ %
(
ââ% &
reader
ââ& ,
)
ââ, -
;
ââ- .
}
ää 
}
ãã 
}
åå 
}
çç 	
public
èè 
static
èè 
IDataReader
èè !
	GetReader
èè" +
(
èè+ ,
string
èè, 2
commandText
èè3 >
,
èè> ?
string
èè@ F
	connSting
èèG P
,
èèP Q
CommandType
èèR ]
commandType
èè^ i
=
èèj k
CommandType
èèl w
.
èèw x
Text
èèx |
,
èè| }
paramsèè~ Ñ
DbParameterèèÖ ê
[èèê ë
]èèë í
dbParametersèèì ü
)èèü †
{
êê 	
var
ëë 
dbConnection
ëë 
=
ëë 
CommonDb
ëë '
.
ëë' ( 
CreateDbConnection
ëë( :
(
ëë: ;
	connSting
ëë; D
)
ëëD E
;
ëëE F
using
ìì 
(
ìì 
var
ìì 
	dbCommand
ìì  
=
ìì! "
dbConnection
ìì# /
.
ìì/ 0
CreateCommand
ìì0 =
(
ìì= >
)
ìì> ?
)
ìì? @
{
îî 
	dbCommand
ïï 
.
ïï 
CommandType
ïï %
=
ïï& '
commandType
ïï( 3
;
ïï3 4
	dbCommand
ññ 
.
ññ 
CommandText
ññ %
=
ññ& '
commandText
ññ( 3
;
ññ3 4
	dbCommand
óó 
.
óó 
CommandTimeout
óó (
=
óó) *
timeout
óó+ 2
;
óó2 3
if
ôô 
(
ôô 
dbParameters
ôô  
!=
ôô! #
null
ôô$ (
)
ôô( )
{
öö 
foreach
õõ 
(
õõ 
var
õõ  
dbParameter
õõ! ,
in
õõ- /
dbParameters
õõ0 <
)
õõ< =
{
úú 
CommonDb
ùù  
.
ùù  !
AddParameter
ùù! -
(
ùù- .
	dbCommand
ùù. 7
,
ùù7 8
dbParameter
ùù9 D
.
ùùD E
Name
ùùE I
,
ùùI J
dbParameter
ùùK V
.
ùùV W
Value
ùùW \
,
ùù\ ]
dbParameter
ùù^ i
.
ùùi j
	FieldType
ùùj s
)
ùùs t
;
ùùt u
}
ûû 
}
üü 
dbConnection
†† 
.
†† 
Open
†† !
(
††! "
)
††" #
;
††# $
return
°° 
	dbCommand
°°  
.
°°  !
ExecuteReader
°°! .
(
°°. /
CommandBehavior
°°/ >
.
°°> ?
CloseConnection
°°? N
)
°°N O
;
°°O P
}
¢¢ 
}
££ 	
public
ØØ 
static
ØØ 
List
ØØ 
<
ØØ 
T
ØØ 
>
ØØ 4
&ExecuteMappedReaderWithOutputParameter
ØØ D
<
ØØD E
T
ØØE F
>
ØØF G
(
ØØG H
string
ØØH N
commandText
ØØO Z
,
ØØZ [
string
ØØ\ b
	connSting
ØØc l
,
ØØl m
out
ØØn q
int
ØØr u
Count
ØØv {
,
ØØ{ |
CommandTypeØØ} à
commandTypeØØâ î
=ØØï ñ
CommandTypeØØó ¢
.ØØ¢ £
TextØØ£ ß
,ØØß ®
params
∞∞ 
DbParameter
∞∞ %
[
∞∞% &
]
∞∞& '
dbParameters
∞∞( 4
)
∞∞4 5
where
∞∞6 ;
T
∞∞< =
:
∞∞> ?
new
∞∞@ C
(
∞∞C D
)
∞∞D E
{
±± 	
using
≤≤ 
SqlConnection
≤≤ 
dbConnection
≤≤  ,
=
≤≤- .
new
≤≤/ 2
SqlConnection
≤≤3 @
(
≤≤@ A
	connSting
≤≤A J
)
≤≤J K
;
≤≤K L
using
≥≥ 

SqlCommand
≥≥ 
	dbCommand
≥≥ &
=
≥≥' (
new
≥≥) ,

SqlCommand
≥≥- 7
(
≥≥7 8
commandText
≥≥8 C
,
≥≥C D
dbConnection
≥≥E Q
)
≥≥Q R
{
¥¥ 
CommandType
µµ 
=
µµ 
commandType
µµ )
,
µµ) *
CommandText
∂∂ 
=
∂∂ 
commandText
∂∂ )
,
∂∂) *
CommandTimeout
∑∑ 
=
∑∑  
timeout
∑∑! (
}
∏∏ 
;
∏∏ 
if
ππ 
(
ππ 
dbParameters
ππ 
!=
ππ 
null
ππ  $
)
ππ$ %
{
∫∫ 
foreach
ªª 
(
ªª 
var
ªª 
dbParameter
ªª (
in
ªª) +
dbParameters
ªª, 8
)
ªª8 9
{
ºº 
CommonDb
ΩΩ 
.
ΩΩ 
AddParameter
ΩΩ )
(
ΩΩ) *
	dbCommand
ΩΩ* 3
,
ΩΩ3 4
dbParameter
ΩΩ5 @
.
ΩΩ@ A
Name
ΩΩA E
,
ΩΩE F
dbParameter
ΩΩG R
.
ΩΩR S
Value
ΩΩS X
,
ΩΩX Y
dbParameter
ΩΩZ e
.
ΩΩe f
	FieldType
ΩΩf o
)
ΩΩo p
;
ΩΩp q
}
ææ 
}
øø 
dbConnection
¡¡ 
.
¡¡ 
Open
¡¡ 
(
¡¡ 
)
¡¡ 
;
¡¡  
SqlDataReader
¬¬ 
dr
¬¬ 
=
¬¬ 
	dbCommand
¬¬ (
.
¬¬( )
ExecuteReader
¬¬) 6
(
¬¬6 7
)
¬¬7 8
;
¬¬8 9
Count
≈≈ 
=
≈≈ 
$num
≈≈ 
;
≈≈ 
while
∆∆ 
(
∆∆ 
dr
∆∆ 
.
∆∆ 
Read
∆∆ 
(
∆∆ 
)
∆∆ 
)
∆∆ 
{
«« 
Count
»» 
=
»» 
dr
»» 
.
»» 
GetValue
»» #
<
»»# $
int
»»$ '
>
»»' (
(
»»( )
TotalRecords
»») 5
)
»»5 6
;
»»6 7
}
…… 
dr
ÃÃ 
.
ÃÃ 

NextResult
ÃÃ 
(
ÃÃ 
)
ÃÃ 
;
ÃÃ 
return
ÕÕ "
DataReaderExtensions
ÕÕ '
.
ÕÕ' (
	MapToList
ÕÕ( 1
<
ÕÕ1 2
T
ÕÕ2 3
>
ÕÕ3 4
(
ÕÕ4 5
dr
ÕÕ5 7
)
ÕÕ7 8
;
ÕÕ8 9
}
ŒŒ 	
}
œœ 
public
—— 

static
—— 
class
—— 
ConvertHelper
—— %
{
““ 
public
”” 
static
”” 
TResult
”” 
ConvertDbValue
”” ,
<
””, -
TResult
””- 4
>
””4 5
(
””5 6
object
””6 <
dbValue
””= D
)
””D E
{
‘‘ 	
if
’’ 
(
’’ 
dbValue
’’ 
==
’’ 
null
’’ 
||
’’  "
dbValue
’’# *
is
’’+ -
DBNull
’’. 4
)
’’4 5
{
÷÷ 
return
◊◊ 
default
◊◊ 
(
◊◊ 
TResult
◊◊ &
)
◊◊& '
;
◊◊' (
}
ÿÿ 
var
⁄⁄ 

resultType
⁄⁄ 
=
⁄⁄ 
typeof
⁄⁄ #
(
⁄⁄# $
TResult
⁄⁄$ +
)
⁄⁄+ ,
;
⁄⁄, -
if
€€ 
(
€€ 

resultType
€€ 
.
€€ 
IsGenericType
€€ (
&&
€€) +

resultType
€€, 6
.
€€6 7&
GetGenericTypeDefinition
€€7 O
(
€€O P
)
€€P Q
==
€€R T
typeof
€€U [
(
€€[ \
Nullable
€€\ d
<
€€d e
>
€€e f
)
€€f g
)
€€g h
{
‹‹ 

resultType
›› 
=
›› 
Nullable
›› %
.
››% &
GetUnderlyingType
››& 7
(
››7 8

resultType
››8 B
)
››B C
;
››C D
}
ﬁﬁ 
return
‡‡ 
(
‡‡ 
TResult
‡‡ 
)
‡‡ 
Convert
‡‡ #
.
‡‡# $

ChangeType
‡‡$ .
(
‡‡. /
dbValue
‡‡/ 6
,
‡‡6 7

resultType
‡‡8 B
)
‡‡B C
;
‡‡C D
}
·· 	
public
„„ 
static
„„ 
object
„„ 
ConvertDbValue
„„ +
(
„„+ ,
object
„„, 2
dbValue
„„3 :
,
„„: ;
Type
„„< @
type
„„A E
)
„„E F
{
‰‰ 	
if
ÂÂ 
(
ÂÂ 
dbValue
ÂÂ 
==
ÂÂ 
null
ÂÂ 
||
ÂÂ  "
dbValue
ÂÂ# *
is
ÂÂ+ -
DBNull
ÂÂ. 4
)
ÂÂ4 5
{
ÊÊ 
return
ÁÁ 

GetDefault
ÁÁ !
(
ÁÁ! "
type
ÁÁ" &
)
ÁÁ& '
;
ÁÁ' (
}
ËË 
var
ÍÍ 

resultType
ÍÍ 
=
ÍÍ 
type
ÍÍ !
;
ÍÍ! "
if
ÏÏ 
(
ÏÏ 
type
ÏÏ 
.
ÏÏ 
IsGenericType
ÏÏ "
&&
ÏÏ# %
type
ÏÏ& *
.
ÏÏ* +&
GetGenericTypeDefinition
ÏÏ+ C
(
ÏÏC D
)
ÏÏD E
==
ÏÏF H
typeof
ÏÏI O
(
ÏÏO P
Nullable
ÏÏP X
<
ÏÏX Y
>
ÏÏY Z
)
ÏÏZ [
)
ÏÏ[ \
{
ÌÌ 

resultType
ÓÓ 
=
ÓÓ 
Nullable
ÓÓ %
.
ÓÓ% &
GetUnderlyingType
ÓÓ& 7
(
ÓÓ7 8
type
ÓÓ8 <
)
ÓÓ< =
;
ÓÓ= >
}
ÔÔ 
return
ÒÒ 
Convert
ÒÒ 
.
ÒÒ 

ChangeType
ÒÒ %
(
ÒÒ% &
dbValue
ÒÒ& -
,
ÒÒ- .

resultType
ÒÒ/ 9
)
ÒÒ9 :
;
ÒÒ: ;
}
ÚÚ 	
public
ÙÙ 
static
ÙÙ 
object
ÙÙ 

GetDefault
ÙÙ '
(
ÙÙ' (
Type
ÙÙ( ,
type
ÙÙ- 1
)
ÙÙ1 2
{
ıı 	
return
ˆˆ 
type
ˆˆ 
.
ˆˆ 
IsValueType
ˆˆ #
?
ˆˆ$ %
	Activator
ˆˆ& /
.
ˆˆ/ 0
CreateInstance
ˆˆ0 >
(
ˆˆ> ?
type
ˆˆ? C
)
ˆˆC D
:
ˆˆE F
null
ˆˆG K
;
ˆˆK L
}
˜˜ 	
public
˘˘ 
static
˘˘ 
TResult
˘˘ 
GetValue
˘˘ &
<
˘˘& '
TResult
˘˘' .
>
˘˘. /
(
˘˘/ 0
this
˘˘0 4
IDataReader
˘˘5 @
reader
˘˘A G
,
˘˘G H
string
˘˘I O
	fieldName
˘˘P Y
)
˘˘Y Z
{
˙˙ 	
var
˚˚ 
dbValue
˚˚ 
=
˚˚ 
reader
˚˚  
[
˚˚  !
	fieldName
˚˚! *
]
˚˚* +
;
˚˚+ ,
return
¸¸ 
ConvertDbValue
¸¸ !
<
¸¸! "
TResult
¸¸" )
>
¸¸) *
(
¸¸* +
dbValue
¸¸+ 2
)
¸¸2 3
;
¸¸3 4
}
˝˝ 	
}
˛˛ 
public
ÄÄ 

static
ÄÄ 
class
ÄÄ 
CommonDb
ÄÄ  
{
ÅÅ 
public
ÇÇ 
static
ÇÇ 
IDbConnection
ÇÇ # 
CreateDbConnection
ÇÇ$ 6
(
ÇÇ6 7
string
ÇÇ7 =
ConnectionString
ÇÇ> N
)
ÇÇN O
{
ÉÉ 	
return
ÑÑ 
new
ÑÑ 
SqlConnection
ÑÑ $
(
ÑÑ$ %
ConnectionString
ÑÑ% 5
)
ÑÑ5 6
;
ÑÑ6 7
}
ÖÖ 	
public
áá 
static
áá 
IDataParameter
áá $
AddParameter
áá% 1
(
áá1 2

IDbCommand
áá2 <
Command
áá= D
,
ááD E
string
ááF L
ParmName
ááM U
,
ááU V
object
ááW ]
	ParmValue
áá^ g
,
áág h
FieldTypeEnum
áái v
ParmFieldTypeááw Ñ
)ááÑ Ö
{
àà 	
SqlParameter
ää 
p
ää 
;
ää 
switch
ãã 
(
ãã 
ParmFieldType
ãã !
)
ãã! "
{
åå 
case
çç 
FieldTypeEnum
çç "
.
çç" #"
FieldTypeLongVarchar
çç# 7
:
çç7 8
case
éé 
FieldTypeEnum
éé "
.
éé" #
FieldTypeText
éé# 0
:
éé0 1
{
èè 
p
êê 
=
êê 
new
êê 
SqlParameter
êê  ,
(
êê, -
$str
êê- 0
+
êê1 2
ParmName
êê3 ;
,
êê; <
	SqlDbType
êê= F
.
êêF G
Text
êêG K
)
êêK L
;
êêL M
p
ëë 
.
ëë 
Value
ëë 
=
ëë  !
	ParmValue
ëë" +
;
ëë+ ,
break
íí 
;
íí 
}
ìì 
case
îî 
FieldTypeEnum
îî "
.
îî" #
FieldTypeNText
îî# 1
:
îî1 2
{
ïï 
p
ññ 
=
ññ 
new
ññ 
SqlParameter
ññ  ,
(
ññ, -
$str
ññ- 0
+
ññ1 2
ParmName
ññ3 ;
,
ññ; <
	SqlDbType
ññ= F
.
ññF G
NText
ññG L
)
ññL M
;
ññM N
p
óó 
.
óó 
Value
óó 
=
óó  !
	ParmValue
óó" +
;
óó+ ,
break
òò 
;
òò 
}
ôô 
default
öö 
:
öö 
{
õõ 
p
úú 
=
úú 
new
úú 
SqlParameter
úú  ,
(
úú, -
$str
úú- 0
+
úú1 2
ParmName
úú3 ;
,
úú; <
	ParmValue
úú= F
)
úúF G
;
úúG H
break
ùù 
;
ùù 
}
ûû 
}
üü 
if
°° 
(
°° 
	ParmValue
°° 
==
°° 
null
°° !
||
°°" $
	ParmValue
°°% .
.
°°. /
Equals
°°/ 5
(
°°5 6
string
°°6 <
.
°°< =
Empty
°°= B
)
°°B C
)
°°C D
{
¢¢ 
p
££ 
.
££ 
Value
££ 
=
££ 
DBNull
££  
.
££  !
Value
££! &
;
££& '
}
§§ 
Command
¶¶ 
.
¶¶ 

Parameters
¶¶ 
.
¶¶ 
Add
¶¶ "
(
¶¶" #
p
¶¶# $
)
¶¶$ %
;
¶¶% &
return
ßß 
p
ßß 
;
ßß 
}
®® 	
}
©© 
public
´´ 

class
´´ 
DbParameter
´´ 
{
¨¨ 
public
≠≠ 
string
≠≠ 
Name
≠≠ 
{
≠≠ 
get
≠≠  
;
≠≠  !
set
≠≠" %
;
≠≠% &
}
≠≠' (
public
ÆÆ 
object
ÆÆ 
Value
ÆÆ 
{
ÆÆ 
get
ÆÆ !
;
ÆÆ! "
set
ÆÆ# &
;
ÆÆ& '
}
ÆÆ( )
public
ØØ 
FieldTypeEnum
ØØ 
	FieldType
ØØ &
{
ØØ' (
get
ØØ) ,
;
ØØ, -
set
ØØ. 1
;
ØØ1 2
}
ØØ3 4
public
∞∞ 
int
∞∞ 
Length
∞∞ 
{
∞∞ 
get
∞∞ 
;
∞∞  
set
∞∞! $
;
∞∞$ %
}
∞∞& '
public
±±  
ParameterDirection
±± !
	Direction
±±" +
{
±±, -
get
±±. 1
;
±±1 2
set
±±3 6
;
±±6 7
}
±±8 9
public
≥≥ 
DbParameter
≥≥ 
(
≥≥ 
string
≥≥ !
name
≥≥" &
,
≥≥& '
object
≥≥( .
value
≥≥/ 4
,
≥≥4 5
FieldTypeEnum
≥≥6 C
	fieldType
≥≥D M
,
≥≥M N
int
≥≥O R
length
≥≥S Y
=
≥≥Z [
$num
≥≥\ ]
,
≥≥] ^ 
ParameterDirection
≥≥_ q
	direction
≥≥r {
=
≥≥| }!
ParameterDirection≥≥~ ê
.≥≥ê ë
Input≥≥ë ñ
)≥≥ñ ó
{
¥¥ 	
Name
µµ 
=
µµ 
name
µµ 
;
µµ 
Value
∂∂ 
=
∂∂ 
value
∂∂ 
;
∂∂ 
	FieldType
∑∑ 
=
∑∑ 
	fieldType
∑∑ !
;
∑∑! "
Length
∏∏ 
=
∏∏ 
length
∏∏ 
;
∏∏ 
	Direction
ππ 
=
ππ 
	direction
ππ !
;
ππ! "
}
∫∫ 	
public
ºº 
static
ºº 
implicit
ºº 
operator
ºº '
DbParameter
ºº( 3
(
ºº3 4
SqlParameter
ºº4 @
v
ººA B
)
ººB C
{
ΩΩ 	
throw
ææ 
new
ææ %
NotImplementedException
ææ -
(
ææ- .
)
ææ. /
;
ææ/ 0
}
øø 	
}
¿¿ 
public
¬¬ 

enum
¬¬ 
FieldTypeEnum
¬¬ 
{
√√ 
FieldTypeVarchar
ƒƒ 
=
ƒƒ 
$num
ƒƒ 
,
ƒƒ 
FieldTypeNumber
≈≈ 
=
≈≈ 
$num
≈≈ 
,
≈≈ 
FieldTypeBoolean
∆∆ 
=
∆∆ 
$num
∆∆ 
,
∆∆ 
FieldTypeDate
«« 
=
«« 
$num
«« 
,
«« "
FieldTypeLongVarchar
»» 
=
»» 
$num
»»  
,
»»  !
FieldTypeText
…… 
=
…… 
$num
…… 
,
…… "
FieldTypeValidValues
   
=
   
$num
    
,
    !!
FieldTypeForeignKey
ÀÀ 
=
ÀÀ 
$num
ÀÀ 
,
ÀÀ   
FieldTypeMultiLine
ÃÃ 
=
ÃÃ 
$num
ÃÃ 
,
ÃÃ 
FieldTypeInteger
ÕÕ 
=
ÕÕ 
$num
ÕÕ 
,
ÕÕ 
FieldTypePercent
ŒŒ 
=
ŒŒ 
$num
ŒŒ 
,
ŒŒ 
FieldTypeCurrency
œœ 
=
œœ 
$num
œœ 
,
œœ 
FieldTypeTime
–– 
=
–– 
$num
–– 
,
–– 
FieldTypeDateTime
—— 
=
—— 
$num
—— 
,
—— 
FieldTypeZipCode
““ 
=
““ 
$num
““ 
,
““ 
FieldTypePhone
”” 
=
”” 
$num
”” 
,
”” 
FieldTypeState
‘‘ 
=
‘‘ 
$num
‘‘ 
,
‘‘ 
FieldTypeHTML
’’ 
=
’’ 
$num
’’ 
,
’’ 
FieldTypeEmail
÷÷ 
=
÷÷ 
$num
÷÷ 
,
÷÷  
FieldTypeBirthDate
◊◊ 
=
◊◊ 
$num
◊◊ 
,
◊◊  
FieldTypeNText
ÿÿ 
=
ÿÿ 
$num
ÿÿ 
,
ÿÿ "
FieldTypeUTCDateTime
ŸŸ 
=
ŸŸ 
$num
ŸŸ !
}
⁄⁄ 
public
‹‹ 

static
‹‹ 
class
‹‹ "
DataReaderExtensions
‹‹ ,
{
›› 
public
‰‰ 
static
‰‰ 
List
‰‰ 
<
‰‰ 
T
‰‰ 
>
‰‰ 
	MapToList
‰‰ '
<
‰‰' (
T
‰‰( )
>
‰‰) *
(
‰‰* +
this
‰‰+ /
SqlDataReader
‰‰0 =
dr
‰‰> @
)
‰‰@ A
where
‰‰B G
T
‰‰H I
:
‰‰J K
new
‰‰L O
(
‰‰O P
)
‰‰P Q
{
ÂÂ 	
List
ÊÊ 
<
ÊÊ 
T
ÊÊ 
>
ÊÊ 
RetVal
ÊÊ 
=
ÊÊ 
null
ÊÊ !
;
ÊÊ! "
var
ÁÁ 
Entity
ÁÁ 
=
ÁÁ 
typeof
ÁÁ 
(
ÁÁ  
T
ÁÁ  !
)
ÁÁ! "
;
ÁÁ" #
var
ËË 
PropDict
ËË 
=
ËË 
new
ËË 

Dictionary
ËË )
<
ËË) *
string
ËË* 0
,
ËË0 1
PropertyInfo
ËË2 >
>
ËË> ?
(
ËË? @
)
ËË@ A
;
ËËA B
if
ÍÍ 
(
ÍÍ 
dr
ÍÍ 
!=
ÍÍ 
null
ÍÍ 
&&
ÍÍ 
dr
ÍÍ  
.
ÍÍ  !
HasRows
ÍÍ! (
)
ÍÍ( )
{
ÎÎ 
RetVal
ÏÏ 
=
ÏÏ 
new
ÏÏ 
List
ÏÏ !
<
ÏÏ! "
T
ÏÏ" #
>
ÏÏ# $
(
ÏÏ$ %
)
ÏÏ% &
;
ÏÏ& '
var
ÌÌ 
Props
ÌÌ 
=
ÌÌ 
Entity
ÌÌ "
.
ÌÌ" #
GetProperties
ÌÌ# 0
(
ÌÌ0 1
BindingFlags
ÌÌ1 =
.
ÌÌ= >
Instance
ÌÌ> F
|
ÌÌG H
BindingFlags
ÌÌI U
.
ÌÌU V
Public
ÌÌV \
)
ÌÌ\ ]
;
ÌÌ] ^
PropDict
ÓÓ 
=
ÓÓ 
Props
ÓÓ  
.
ÓÓ  !
ToDictionary
ÓÓ! -
(
ÓÓ- .
p
ÓÓ. /
=>
ÓÓ0 2
p
ÓÓ3 4
.
ÓÓ4 5
Name
ÓÓ5 9
.
ÓÓ9 :
ToUpper
ÓÓ: A
(
ÓÓA B
)
ÓÓB C
,
ÓÓC D
p
ÓÓE F
=>
ÓÓG I
p
ÓÓJ K
)
ÓÓK L
;
ÓÓL M
while
ÔÔ 
(
ÔÔ 
dr
ÔÔ 
.
ÔÔ 
Read
ÔÔ 
(
ÔÔ 
)
ÔÔ  
)
ÔÔ  !
{
 
T
ÒÒ 
	newObject
ÒÒ 
=
ÒÒ  !
new
ÒÒ" %
T
ÒÒ& '
(
ÒÒ' (
)
ÒÒ( )
;
ÒÒ) *
for
ÚÚ 
(
ÚÚ 
int
ÚÚ 
Index
ÚÚ "
=
ÚÚ# $
$num
ÚÚ% &
;
ÚÚ& '
Index
ÚÚ( -
<
ÚÚ. /
dr
ÚÚ0 2
.
ÚÚ2 3

FieldCount
ÚÚ3 =
;
ÚÚ= >
Index
ÚÚ? D
++
ÚÚD F
)
ÚÚF G
{
ÛÛ 
if
ÙÙ 
(
ÙÙ 
PropDict
ÙÙ $
.
ÙÙ$ %
ContainsKey
ÙÙ% 0
(
ÙÙ0 1
dr
ÙÙ1 3
.
ÙÙ3 4
GetName
ÙÙ4 ;
(
ÙÙ; <
Index
ÙÙ< A
)
ÙÙA B
.
ÙÙB C
ToUpper
ÙÙC J
(
ÙÙJ K
)
ÙÙK L
)
ÙÙL M
)
ÙÙM N
{
ıı 
var
ˆˆ 
Info
ˆˆ  $
=
ˆˆ% &
PropDict
ˆˆ' /
[
ˆˆ/ 0
dr
ˆˆ0 2
.
ˆˆ2 3
GetName
ˆˆ3 :
(
ˆˆ: ;
Index
ˆˆ; @
)
ˆˆ@ A
.
ˆˆA B
ToUpper
ˆˆB I
(
ˆˆI J
)
ˆˆJ K
]
ˆˆK L
;
ˆˆL M
if
˜˜ 
(
˜˜  
(
˜˜  !
Info
˜˜! %
!=
˜˜& (
null
˜˜) -
)
˜˜- .
&&
˜˜/ 1
Info
˜˜2 6
.
˜˜6 7
CanWrite
˜˜7 ?
)
˜˜? @
{
¯¯ 
var
˘˘  #
Val
˘˘$ '
=
˘˘( )
dr
˘˘* ,
.
˘˘, -
GetValue
˘˘- 5
(
˘˘5 6
Index
˘˘6 ;
)
˘˘; <
;
˘˘< =
Info
˙˙  $
.
˙˙$ %
SetValue
˙˙% -
(
˙˙- .
	newObject
˙˙. 7
,
˙˙7 8
(
˙˙9 :
Val
˙˙: =
==
˙˙> @
DBNull
˙˙A G
.
˙˙G H
Value
˙˙H M
)
˙˙M N
?
˙˙O P
null
˙˙Q U
:
˙˙V W
Val
˙˙X [
,
˙˙[ \
null
˙˙] a
)
˙˙a b
;
˙˙b c
}
˚˚ 
}
¸¸ 
}
˝˝ 
RetVal
˛˛ 
.
˛˛ 
Add
˛˛ 
(
˛˛ 
	newObject
˛˛ (
)
˛˛( )
;
˛˛) *
}
ˇˇ 
}
ÄÄ 
else
ÅÅ 
if
ÅÅ 
(
ÅÅ 
dr
ÅÅ 
!=
ÅÅ 
null
ÅÅ 
)
ÅÅ  
{
ÇÇ 
RetVal
ÉÉ 
=
ÉÉ 
new
ÉÉ 
List
ÉÉ !
<
ÉÉ! "
T
ÉÉ" #
>
ÉÉ# $
(
ÉÉ$ %
)
ÉÉ% &
;
ÉÉ& '
}
ÑÑ 
else
ÖÖ 
if
ÖÖ 
(
ÖÖ 
dr
ÖÖ 
!=
ÖÖ 
null
ÖÖ 
)
ÖÖ  
RetVal
ÜÜ 
=
ÜÜ 
new
ÜÜ 
List
ÜÜ !
<
ÜÜ! "
T
ÜÜ" #
>
ÜÜ# $
(
ÜÜ$ %
)
ÜÜ% &
;
ÜÜ& '
return
àà 
RetVal
àà 
;
àà 
}
ââ 	
public
êê 
static
êê 
T
êê 
MapToSingle
êê #
<
êê# $
T
êê$ %
>
êê% &
(
êê& '
this
êê' +
SqlDataReader
êê, 9
dr
êê: <
)
êê< =
where
êê> C
T
êêD E
:
êêF G
new
êêH K
(
êêK L
)
êêL M
{
ëë 	
T
íí 
RetVal
íí 
=
íí 
new
íí 
T
íí 
(
íí 
)
íí 
;
íí 
var
ìì 
Entity
ìì 
=
ìì 
typeof
ìì 
(
ìì  
T
ìì  !
)
ìì! "
;
ìì" #
var
îî 
PropDict
îî 
=
îî 
new
îî 

Dictionary
îî )
<
îî) *
string
îî* 0
,
îî0 1
PropertyInfo
îî2 >
>
îî> ?
(
îî? @
)
îî@ A
;
îîA B
if
ññ 
(
ññ 
dr
ññ 
!=
ññ 
null
ññ 
&&
ññ 
dr
ññ  
.
ññ  !
HasRows
ññ! (
)
ññ( )
{
óó 
var
òò 
Props
òò 
=
òò 
Entity
òò "
.
òò" #
GetProperties
òò# 0
(
òò0 1
BindingFlags
òò1 =
.
òò= >
Instance
òò> F
|
òòG H
BindingFlags
òòI U
.
òòU V
Public
òòV \
)
òò\ ]
;
òò] ^
PropDict
ôô 
=
ôô 
Props
ôô  
.
ôô  !
ToDictionary
ôô! -
(
ôô- .
p
ôô. /
=>
ôô0 2
p
ôô3 4
.
ôô4 5
Name
ôô5 9
.
ôô9 :
ToUpper
ôô: A
(
ôôA B
)
ôôB C
,
ôôC D
p
ôôE F
=>
ôôG I
p
ôôJ K
)
ôôK L
;
ôôL M
while
öö 
(
öö 
dr
öö 
.
öö 
Read
öö 
(
öö 
)
öö  
)
öö  !
{
õõ 
for
úú 
(
úú 
int
úú 
Index
úú "
=
úú# $
$num
úú% &
;
úú& '
Index
úú( -
<
úú. /
dr
úú0 2
.
úú2 3

FieldCount
úú3 =
;
úú= >
Index
úú? D
++
úúD F
)
úúF G
{
ùù 
if
ûû 
(
ûû 
PropDict
ûû $
.
ûû$ %
ContainsKey
ûû% 0
(
ûû0 1
dr
ûû1 3
.
ûû3 4
GetName
ûû4 ;
(
ûû; <
Index
ûû< A
)
ûûA B
.
ûûB C
ToUpper
ûûC J
(
ûûJ K
)
ûûK L
)
ûûL M
)
ûûM N
{
üü 
var
†† 
Info
††  $
=
††% &
PropDict
††' /
[
††/ 0
dr
††0 2
.
††2 3
GetName
††3 :
(
††: ;
Index
††; @
)
††@ A
.
††A B
ToUpper
††B I
(
††I J
)
††J K
]
††K L
;
††L M
if
°° 
(
°°  
(
°°  !
Info
°°! %
!=
°°& (
null
°°) -
)
°°- .
&&
°°/ 1
Info
°°2 6
.
°°6 7
CanWrite
°°7 ?
)
°°? @
{
¢¢ 
var
££  #
Val
££$ '
=
££( )
dr
££* ,
.
££, -
GetValue
££- 5
(
££5 6
Index
££6 ;
)
££; <
;
££< =
Info
§§  $
.
§§$ %
SetValue
§§% -
(
§§- .
RetVal
§§. 4
,
§§4 5
(
§§6 7
Val
§§7 :
==
§§; =
DBNull
§§> D
.
§§D E
Value
§§E J
)
§§J K
?
§§L M
null
§§N R
:
§§S T
Val
§§U X
,
§§X Y
null
§§Z ^
)
§§^ _
;
§§_ `
}
•• 
}
¶¶ 
}
ßß 
}
®® 
}
©© 
return
™™ 
RetVal
™™ 
;
™™ 
}
´´ 	
}
¨¨ 
}≠≠ à
ID:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Helper\PasswordHelper.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Helper# )
{ 
public 

static 
class 
PasswordHelper &
{ 
public 
static 
string  
CreateRandomPassword 1
(1 2
int2 5
length6 <
== >
$num? A
)A B
{ 	
string 

validChars 
= 
$str  j
;j k
Random 
random 
= 
new 
Random  &
(& '
)' (
;( )
char 
[ 
] 
chars 
= 
new 
char #
[# $
length$ *
]* +
;+ ,
for 
( 
int 
i 
= 
$num 
; 
i 
< 
length  &
;& '
i( )
++) +
)+ ,
{ 
chars 
[ 
i 
] 
= 

validChars %
[% &
random& ,
., -
Next- 1
(1 2
$num2 3
,3 4

validChars5 ?
.? @
Length@ F
)F G
]G H
;H I
} 
return 
new 
string 
( 
chars #
)# $
;$ %
} 	
} 
} ª
GD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Helper\SQLMetaStore.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Helper# )
{ 
public 

class 
SQLMetaStore 
{ 
public 
static 
string 
User_SearchPageWise 0
=1 2
$str3 P
;P Q
public 
static 
string 
User_UpdatePassword 0
=1 2
$str3 P
;P Q
public 
static 
string 
User_GetUserDetails 0
=1 2
$str3 P
;P Q
public 
static 
string 
User_ResetPassword /
=0 1
$str2 N
;N O
public 
static 
string !
Branch_SearchPageWise 2
=3 4
$str5 T
;T U
public 
static 
string #
Branch_GetBranchDetails 4
=5 6
$str7 X
;X Y
public 
static 
string &
User_UpsertUserBankAccount 7
=8 9
$str: Z
;Z [
public 
static 
string *
RefreshToken_GetDetailsbyToken ;
=< =
$str> f
;f g
} 
} íM
RD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\PersistenceServiceRegistration.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
{ 
public 

static 
class *
PersistenceServiceRegistration 6
{ 
[ 	#
ExcludeFromCodeCoverage	  
]  !
public 
static 
IServiceCollection ("
AddPersistenceServices) ?
(? @
this@ D
IServiceCollectionE W
servicesX `
,` a
IConfigurationb p
configurationq ~
)~ 
{ 	
var 

dbProvider 
= 
configuration *
.* +
GetValue+ 3
<3 4
string4 :
>: ;
(; <
$str< H
)H I
;I J
switch 
( 

dbProvider 
) 
{ 
case 
$str 
: 
services 
. 
AddDbContext )
<) *
ValuationDbContext* <
>< =
(= >
options> E
=>F H
options 
.  
UseSqlServer  ,
(, -
configuration- :
.: ;
GetConnectionString; N
(N O
$strO ^
)^ _
)_ `
)` a
;a b
break 
; 
default 
: 
break 
; 
} 
services 
. 
	AddScoped 
< 
IDashboardService '
,' (
DashboardService) 9
>9 :
(: ;
); <
;< =
services   
.   
	AddScoped   
<   "
IMasterLocationService   ,
,  , -!
MasterLocationService  . C
>  C D
(  D E
)  E F
;  F G
services!! 
.!! 
	AddScoped!! 
(!! 
typeof!! 
(!! 
IAsyncRepository!! -
<!!- .
>!!. /
)!!/ 0
,!!0 1
typeof!!2 8
(!!8 9
BaseRepository!!9 G
<!!G H
>!!H I
)!!I J
)!!J K
;!!K L
services"" 
."" 
	AddScoped"" 
<"" 
IBranchRepository"" 0
,""0 1
BranchRepository""2 B
>""B C
(""C D
)""D E
;""E F
services$$ 
.$$ 
	AddScoped$$ 
<$$ !
IMasterCityRepository$$ 4
,$$4 5 
MasterCityRepository$$6 J
>$$J K
($$K L
)$$L M
;$$M N
services%% 
.%% 
	AddScoped%% 
<%% 
IMasterCityService%% 1
,%%1 2
MasterCityService%%3 D
>%%D E
(%%E F
)%%F G
;%%G H
services&& 
.&& 
	AddScoped&& 
<&& !
IMasterCountryService&& 4
,&&4 5 
MasterCountryService&&6 J
>&&J K
(&&K L
)&&L M
;&&M N
services'' 
.'' 
	AddScoped'' 
<'' 
IMasterStateService'' 2
,''2 3
MasterStateService''4 F
>''F G
(''G H
)''H I
;''I J
services(( 
.(( 
	AddScoped(( 
<(( $
IMasterDepartmentService(( 7
,((7 8#
MasterDepartmentService((9 P
>((P Q
(((Q R
)((R S
;((S T
services)) 
.)) 
	AddScoped)) 
<)) %
IMasterDesignationService)) 8
,))8 9$
MasterDesignationService)): R
>))R S
())S T
)))T U
;))U V
services** 
.** 
	AddScoped** 
<** #
IRefreshTokenRepository** 6
,**6 7"
RefreshTokenRepository**8 N
>**N O
(**O P
)**P Q
;**Q R
services++ 
.++ 
AddTransient++ !
<++! "
IMasterUserService++" 4
,++4 5
MasterUserService++6 G
>++G H
(++H I
)++I J
;++J K
services,, 
.,, 
AddTransient,, !
<,,! "$
IMasterDictionaryService,," :
,,,: ;#
MasterDictionaryService,,< S
>,,S T
(,,T U
),,U V
;,,V W
services-- 
.-- 
	AddScoped-- 
<-- #
IRefreshTokenRepository-- 6
,--6 7"
RefreshTokenRepository--8 N
>--N O
(--O P
)--P Q
;--Q R
services.. 
... 
AddTransient.. !
<..! " 
IMasterClientService.." 6
,..6 7
MasterClientService..8 K
>..K L
(..L M
)..M N
;..N O
services// 
.// 
AddTransient// !
<//! "$
IMasterClientTypeService//" :
,//: ;#
MasterClientTypeService//< S
>//S T
(//T U
)//U V
;//V W
services00 
.00 
AddTransient00 !
<00! " 
IMasterVendorService00" 6
,006 7
MasterVendorService008 K
>00K L
(00L M
)00M N
;00N O
services11 
.11 
AddTransient11 !
<11! "
IMasterRoleService11" 4
,114 5
MasterRoleService116 G
>11G H
(11H I
)11I J
;11J K
services22 
.22 
AddTransient22 !
<22! "'
IMasterRoleModulePermission22" =
,22= >-
!MasterRoleModulePermissionService22? `
>22` a
(22a b
)22b c
;22c d
services33 
.33 
AddSingleton33 !
<33! "
IMemoryCache33" .
,33. /
MemoryCache330 ;
>33; <
(33< =
)33= >
;33> ?
services44 
.44 
AddTransient44 !
<44! " 
IMasterModuleService44" 6
,446 7
MasterModuleService448 K
>44K L
(44L M
)44M N
;44N O
services55 
.55 
AddTransient55 !
<55! "$
IValuationRequestService55" :
,55: ;#
ValuationRequestService55< S
>55S T
(55T U
)55U V
;55V W
services66 
.66 
AddTransient66 !
<66! "'
IMasterValuationFeesService66" =
,66= >&
MasterValuationFeesService66? Y
>66Y Z
(66Z [
)66[ \
;66\ ]
services77 
.77 
AddTransient77 !
<77! "*
IMasterValuationFeeTypeService77" @
,77@ A)
MasterValuationFeeTypeService77B _
>77_ `
(77` a
)77a b
;77b c
services88 
.88 
AddTransient88 !
<88! ""
IMasterPropertyService88" 8
,888 9!
MasterPropertyService88: O
>88O P
(88P Q
)88Q R
;88R S
services99 
.99 
AddTransient99 !
<99! "&
IMasterPropertyTypeService99" <
,99< =%
MasterPropertyTypeService99> W
>99W X
(99X Y
)99Y Z
;99Z [
services:: 
.:: 
AddTransient:: !
<::! ")
IMasterPropertySubTypeService::" ?
,::? @(
MasterPropertySubTypeService::A ]
>::] ^
(::^ _
)::_ `
;::` a
services;; 
.;; 
AddTransient;; !
<;;! "*
IValuationRequestStatusService;;" @
,;;@ A)
ValuationRequestStatusService;;B _
>;;_ `
(;;` a
);;a b
;;;b c
services<< 
.<< 
AddTransient<< !
<<<! "&
IValuationQuatationService<<" <
,<<< =%
ValuationQuatationService<<> W
><<W X
(<<X Y
)<<Y Z
;<<Z [
services== 
.== 
AddTransient== !
<==! "$
IValuationInvoiceService==" :
,==: ;#
ValuationInvoiceService==< S
>==S T
(==T U
)==U V
;==V W
services>> 
.>> 
AddTransient>> !
<>>! "'
IMasterOwnershipTypeService>>" =
,>>= >&
MasterOwnershipTypeService>>? Y
>>>Y Z
(>>Z [
)>>[ \
;>>\ ]
services?? 
.?? 
AddTransient?? !
<??! "
IAuditLogService??" 2
,??2 3
AuditLogService??4 C
>??C D
(??D E
)??E F
;??F G
services@@ 
.@@ 
AddTransient@@ !
<@@! "'
IValuationAssessmentService@@" =
,@@= >&
ValuationAssessmentService@@? Y
>@@Y Z
(@@Z [
)@@[ \
;@@\ ]
servicesAA 
.AA 
AddTransientAA !
<AA! "&
IMasterNotificationServiceAA" <
,AA< =%
MasterNotificationServiceAA> W
>AAW X
(AAX Y
)AAY Z
;AAZ [
servicesBB 
.BB 
AddTransientBB !
<BB! "
IFileUploadServiceBB" 4
,BB4 5
FileUploadServiceBB6 G
>BBG H
(BBH I
)BBI J
;BBJ K
servicesCC 
.CC 
AddTransientCC !
<CC! "'
IMasterApproverLevelServiceCC" =
,CC= >&
MasterApproverLevelServiceCC? Y
>CCY Z
(CCZ [
)CC[ \
;CC\ ]
returnDD 
servicesDD 
;DD 
}EE 	
}FF 
}GG óH
OD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Repositories\BaseRepository.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Repositories# /
{ 
public 

class 
BaseRepository 
<  
T  !
>! "
:# $
IAsyncRepository% 5
<5 6
T6 7
>7 8
where9 >
T? @
:A B
classC H
{		 
	protected

 
readonly

 
ValuationDbContext

 -

_dbContext

. 8
;

8 9
private 
readonly 
ILogger  
_logger! (
;( )
public 
BaseRepository 
( 
ValuationDbContext 0
	dbContext1 :
,: ;
ILogger< C
<C D
TD E
>E F
loggerG M
)M N
{ 	

_dbContext 
= 
	dbContext "
;" #
_logger$ +
=, -
logger. 4
;4 5
} 	
public 
virtual 
async 
Task !
<! "
T" #
?# $
>$ %
GetByIdAsync& 2
(2 3
int3 6
id7 9
)9 :
{ 	
return 
await 

_dbContext #
.# $
Set$ '
<' (
T( )
>) *
(* +
)+ ,
., -
	FindAsync- 6
(6 7
id7 9
)9 :
;: ;
} 	
public 
async 
Task 
< 
IReadOnlyList '
<' (
T( )
>) *
>* +
ListAllAsync, 8
(8 9
)9 :
{ 	
_logger 
. 
LogInformation "
(" #
$str# ;
); <
;< =
return 
await 

_dbContext #
.# $
Set$ '
<' (
T( )
>) *
(* +
)+ ,
., -
ToListAsync- 8
(8 9
)9 :
;: ;
} 	
public 
async 
virtual 
Task !
<! "
IReadOnlyList" /
</ 0
T0 1
>1 2
>2 3 
GetPagedReponseAsync4 H
(H I
intI L
pageM Q
,Q R
intS V
sizeW [
)[ \
{ 	
return 
await 

_dbContext #
.# $
Set$ '
<' (
T( )
>) *
(* +
)+ ,
., -
Skip- 1
(1 2
(2 3
page3 7
-8 9
$num: ;
); <
*= >
size? C
)C D
.D E
TakeE I
(I J
sizeJ N
)N O
.O P
AsNoTrackingP \
(\ ]
)] ^
.^ _
ToListAsync_ j
(j k
)k l
;l m
} 	
public!! 
async!! 
Task!! 
<!! 
T!! 
>!! 
AddAsync!! %
(!!% &
T!!& '
entity!!( .
)!!. /
{"" 	
await## 

_dbContext## 
.## 
Set##  
<##  !
T##! "
>##" #
(### $
)##$ %
.##% &
AddAsync##& .
(##. /
entity##/ 5
)##5 6
;##6 7
await$$ 

_dbContext$$ 
.$$ 
SaveChangesAsync$$ -
($$- .
)$$. /
;$$/ 0
return&& 
entity&& 
;&& 
}'' 	
public// 
async// 
Task// 
UpdateAsync// %
(//% &
T//& '
entity//( .
)//. /
{00 	

_dbContext22 
.22 
ChangeTracker22 $
.22$ %
Clear22% *
(22* +
)22+ ,
;22, -

_dbContext44 
.44 
Entry44 
(44 
entity44 #
)44# $
.44$ %
State44% *
=44+ ,
EntityState44- 8
.448 9
Modified449 A
;44A B
await55 

_dbContext55 
.55 
SaveChangesAsync55 -
(55- .
)55. /
;55/ 0
}66 	
public88 
async88 
Task88 
DeleteAsync88 %
(88% &
T88& '
entity88( .
)88. /
{99 	

_dbContext:: 
.:: 
Set:: 
<:: 
T:: 
>:: 
(:: 
):: 
.::  
Remove::  &
(::& '
entity::' -
)::- .
;::. /
await;; 

_dbContext;; 
.;; 
SaveChangesAsync;; -
(;;- .
);;. /
;;;/ 0
}<< 	
public>> 
virtual>> 
async>> 
Task>> !
<>>! "
T>>" #
>>># $
GetByIdAsync>>% 1
(>>1 2
Guid>>2 6
id>>7 9
)>>9 :
{?? 	
return@@ 
await@@ 

_dbContext@@ #
.@@# $
Set@@$ '
<@@' (
T@@( )
>@@) *
(@@* +
)@@+ ,
.@@, -
	FindAsync@@- 6
(@@6 7
id@@7 9
)@@9 :
;@@: ;
}AA 	
publicNN 
stringNN 
GenerateAccountIdNN '
(NN' (
stringNN( .
	tableNameNN/ 8
,NN8 9
intNN: =
tableKeyNN> F
,NNF G
intNNH K
?NNK L
branchIdNNM U
)NNU V
{OO 	
stringPP 
	AccountIdPP 
=PP 
$strPP !
;PP! "
stringQQ 
randomNumberQQ 
=QQ  !
newQQ" %
RandomQQ& ,
(QQ, -
)QQ- .
.QQ. /
NextQQ/ 3
(QQ3 4
Int32QQ4 9
.QQ9 :
MaxValueQQ: B
)QQB C
.QQC D
ToStringQQD L
(QQL M
)QQM N
.QQN O
	SubstringQQO X
(QQX Y
$numQQY Z
,QQZ [
$numQQ\ ]
)QQ] ^
;QQ^ _
switchSS 
(SS 
	tableNameSS 
)SS 
{TT 
caseUU  
ApplicationConstantsUU )
.UU) *
BranchUU* 0
:UU0 1
caseVV  
ApplicationConstantsVV )
.VV) *
SupplierVV* 2
:VV2 3
{WW 
	AccountIdXX !
=XX" #
CoerceValueXX$ /
(XX/ 0
tableKeyXX0 8
.XX8 9
ToStringXX9 A
(XXA B
)XXB C
,XXC D
$numXXE F
)XXF G
+XXH I 
ApplicationConstantsXXJ ^
.XX^ _
Dateformat1XX_ j
+XXk l
randomNumberXXm y
;XXy z
breakYY 
;YY 
}ZZ 
case[[  
ApplicationConstants[[ )
.[[) *
Customer[[* 2
:[[2 3
case\\  
ApplicationConstants\\ )
.\\) *
User\\* .
:\\. /
{]] 
	AccountId^^ !
=^^" #
CoerceValue^^$ /
(^^/ 0
tableKey^^0 8
.^^8 9
ToString^^9 A
(^^A B
)^^B C
,^^C D
$num^^E F
)^^F G
+^^H I
CoerceValue^^J U
(^^U V
branchId^^V ^
.^^^ _
ToString^^_ g
(^^g h
)^^h i
,^^i j
$num^^k l
,^^l m
true^^n r
)^^r s
+^^t u!
ApplicationConstants	^^v ä
.
^^ä ã
Dateformat1
^^ã ñ
;
^^ñ ó
break__ 
;__ 
}`` 
}aa 
returncc 
	AccountIdcc 
;cc 
}dd 	
privateff 
stringff 
CoerceValueff "
(ff" #
stringff# )
Valueff* /
,ff/ 0
intff1 4
lengthff5 ;
,ff; <
boolff= A
canTrimffB I
=ffJ K
falseffL Q
)ffQ R
{gg 	
ifhh 
(hh 
Valuehh 
==hh 
nullhh 
)hh 
returnii 
$strii 
.ii 
PadLeftii "
(ii" #
lengthii# )
,ii) *
$charii+ .
)ii. /
;ii/ 0
elsekk 
ifkk 
(kk 
Valuekk 
.kk 
Lengthkk !
>=kk" $
$numkk% &
&&kk' )
canTrimkk* 1
)kk1 2
returnll 
Valuell 
.ll 
	Substringll &
(ll& '
$numll' (
,ll( )
lengthll* 0
)ll0 1
;ll1 2
elsemm 
returnnn 
Valuenn 
.nn 
PadLeftnn $
(nn$ %
lengthnn% +
,nn+ ,
$charnn- 0
)nn0 1
;nn1 2
}oo 	
}rr 
}ss •Q
QD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Repositories\BranchRepository.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Repositories# /
{ 
public 

class 
BranchRepository !
:" #
BaseRepository$ 2
<2 3
Branch3 9
>9 :
,: ;
IBranchRepository< M
{ 
private 
readonly 
ILogger  
_logger! (
;( )
	protected 
IConfiguration  
_configuration! /
;/ 0
private 
string 
_dbConnection $
;$ %
public 
BranchRepository 
(  
ValuationDbContext  2
	dbContext3 <
,< =
ILogger> E
<E F
BranchF L
>L M
loggerN T
,T U
IConfigurationV d
configuratione r
)r s
:t u
basev z
(z {
	dbContext	{ Ñ
,
Ñ Ö
logger
Ü å
)
å ç
{ 	
_logger 
= 
logger 
; 
_configuration 
= 
configuration *
;* +
_dbConnection 
= 
_configuration *
[* +
ApplicationHelper+ <
.< =
ConnectionStringkey= P
]P Q
;Q R
} 	
public 
async 
Task 
< 
List 
< 
Branch %
>% &
>& '!
GetBranchesWithEvents( =
(= >
bool> B
includePassedEventsC V
)V W
{ 	
_logger   
.   
LogInformation   "
(  " #
$str  # F
)  F G
;  G H
var!! 
allBranches!! 
=!! 
await!! #

_dbContext!!$ .
.!!. /
Set!!/ 2
<!!2 3
Branch!!3 9
>!!9 :
(!!: ;
)!!; <
.!!< =
Include!!= D
(!!D E
x!!E F
=>!!G I
x!!J K
.!!K L
Address!!L S
)!!S T
.!!T U
ToListAsync!!U `
(!!` a
)!!a b
;!!b c
_logger&& 
.&& 
LogInformation&& "
(&&" #
$str&&# F
)&&F G
;&&G H
return'' 
allBranches'' 
;'' 
}(( 	
public55 
async55 
Task55 
<55 !
BranchDetailViewModel55 /
>55/ 0
GetBranchDetails551 A
(55A B 
GetBranchDetailQuery55B V
branchDetail55W c
)55c d
{66 	
DbParameter77 
[77 
]77 
dbParameters77 &
=77' (
{88 
new99 
DbParameter99 
(99  
$str99  $
,99$ %
branchDetail99& 2
.992 3
Id993 5
,995 6
FieldTypeEnum997 D
.99D E
FieldTypeInteger99E U
)99U V
,99V W
new:: 
DbParameter:: 
(::  
$str::  &
,::& '
branchDetail::( 4
.::4 5
Name::5 9
,::9 :
FieldTypeEnum::; H
.::H I
FieldTypeVarchar::I Y
)::Y Z
,::Z [
new;; 
DbParameter;; 
(;;  
$str;;  *
,;;* +
branchDetail;;, 8
.;;8 9
status;;9 ?
,;;? @
FieldTypeEnum;;A N
.;;N O
FieldTypeBoolean;;O _
);;_ `
}<< 
;<< 
var>> 
branchDetails>> 
=>> 

FJDBHelper>>  *
.>>* +
ExecuteMappedReader>>+ >
<>>> ?!
BranchDetailViewModel>>? T
>>>T U
(>>U V
SQLMetaStore>>V b
.>>b c#
Branch_GetBranchDetails>>c z
,>>z {
_dbConnection	>>| â
,
>>â ä
CommandType?? #
.??# $
StoredProcedure??$ 3
,??3 4
dbParameters??5 A
)??A B
.@@ 
FirstOrDefault@@ '
(@@' (
)@@( )
;@@) *
_loggerBB 
.BB 
LogInformationBB "
(BB" #
$strBB# \
)BB\ ]
;BB] ^
returnCC 
branchDetailsCC  
;CC  !
}DD 	
publicMM 
asyncMM 
TaskMM 
<MM 
BranchMM  
>MM  !
DeactivateBranchMM" 2
(MM2 3
intMM3 6
IdMM7 9
)MM9 :
{NN 	
varOO 
branchOO 
=OO 
awaitOO 

_dbContextOO )
.OO) *
SetOO* -
<OO- .
BranchOO. 4
>OO4 5
(OO5 6
)OO6 7
.OO7 8
WhereOO8 =
(OO= >
xOO> ?
=>OO@ B
xOOC D
.OOD E
IdOOE G
==OOH J
IdOOK M
)OOM N
.OON O
FirstOrDefaultAsyncOOO b
(OOb c
)OOc d
;OOd e
awaitQQ 
UpdateAsyncQQ 
(QQ 
branchQQ $
)QQ$ %
;QQ% &
_loggerSS 
.SS 
LogInformationSS "
(SS" #
$strSS# \
)SS\ ]
;SS] ^
returnTT 
branchTT 
;TT 
}UU 	
public^^ 
async^^ 
Task^^ 
<^^ 
GlobalSeachResponse^^ -
>^^- .-
!GetBranchListWithPaginationGlobal^^/ P
(^^P Q
BranchSearchFilters^^Q d
searchBranch^^e q
)^^q r
{__ 	
int`` 
_count`` 
;`` 
DbParameteraa 
[aa 
]aa 
dbParametersaa &
=aa' (
{bb 
newcc 
DbParametercc 
(cc   
ApplicationConstantscc  4
.cc4 5

PageNumbercc5 ?
,cc? @
searchBranchccA M
.ccM N

PageNumberccN X
,ccX Y
FieldTypeEnumccZ g
.ccg h
FieldTypeIntegercch x
)ccx y
,ccy z
newdd 
DbParameterdd 
(dd   
ApplicationConstantsdd  4
.dd4 5
PageSizedd5 =
,dd= >
searchBranchdd? K
.ddK L
PageSizeddL T
,ddT U
FieldTypeEnumddV c
.ddc d
FieldTypeIntegerddd t
)ddt u
,ddu v
newee 
DbParameteree 
(ee   
ApplicationConstantsee  4
.ee4 5
OrderClauseee5 @
,ee@ A
searchBrancheeB N
.eeN O
OrderClauseeeO Z
,eeZ [
FieldTypeEnumee\ i
.eei j
FieldTypeVarchareej z
)eez {
,ee{ |
newff 
DbParameterff 
(ff   
ApplicationConstantsff  4
.ff4 5
ReverseSortff5 @
,ff@ A
searchBranchffB N
.ffN O
ReverseSortffO Z
,ffZ [
FieldTypeEnumff\ i
.ffi j
FieldTypeVarcharffj z
)ffz {
,ff{ |
newgg 
DbParametergg 
(gg  
$strgg  *
,gg* +
searchBranchgg, 8
.gg8 9
IsActivegg9 A
,ggA B
FieldTypeEnumggC P
.ggP Q
FieldTypeBooleanggQ a
)gga b
,ggb c
newhh 
DbParameterhh 
(hh  
$strhh  (
,hh( )
searchBranchhh* 6
.hh6 7
Letterhh7 =
,hh= >
FieldTypeEnumhh? L
.hhL M
FieldTypeVarcharhhM ]
)hh] ^
}ii 
;ii 
varll 

branchlistll 
=ll 

FJDBHelperll '
.ll' (2
&ExecuteMappedReaderWithOutputParameterll( N
<llN O
BranchViewModelllO ^
>ll^ _
(ll_ `
SQLMetaStorell` l
.lll m"
Branch_SearchPageWise	llm Ç
,
llÇ É
_dbConnectionmm (
,mm( )
outmm* -
_countmm. 4
,mm4 5
CommandTypemm6 A
.mmA B
StoredProceduremmB Q
,mmQ R
dbParametersmmS _
)mm_ `
;mm` a
varpp 
responsepp 
=pp 
newpp 
GlobalSeachResponsepp 2
(pp2 3
)pp3 4
{qq 
OrderClauserr 
=rr 
searchBranchrr *
.rr* +
OrderClauserr+ 6
,rr6 7

PageNumberss 
=ss 
searchBranchss )
.ss) *

PageNumberss* 4
,ss4 5
PageSizett 
=tt 
searchBranchtt '
.tt' (
PageSizett( 0
,tt0 1
ReverseSortuu 
=uu 
searchBranchuu *
.uu* +
ReverseSortuu+ 6
,uu6 7
TotalRecordsvv 
=vv 
_countvv %
,vv% &
dataresultsww 
=ww 

branchlistww (
}xx 
;xx 
_loggerzz 
.zz 
LogInformationzz "
(zz" #
$strzz# m
)zzm n
;zzn o
return{{ 
response{{ 
;{{ 
}|| 	
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
Branch
ÑÑ  
>
ÑÑ  !
GetBranchByName
ÑÑ" 1
(
ÑÑ1 2
string
ÑÑ2 8
name
ÑÑ9 =
)
ÑÑ= >
{
ÖÖ 	
var
ÜÜ 
user
ÜÜ 
=
ÜÜ 
await
ÜÜ 

_dbContext
ÜÜ '
.
ÜÜ' (
Set
ÜÜ( +
<
ÜÜ+ ,
Branch
ÜÜ, 2
>
ÜÜ2 3
(
ÜÜ3 4
)
ÜÜ4 5
.
ÜÜ5 6
Where
ÜÜ6 ;
(
ÜÜ; <
x
ÜÜ< =
=>
ÜÜ> @
x
ÜÜA B
.
ÜÜB C
Name
ÜÜC G
==
ÜÜH J
name
ÜÜK O
)
ÜÜO P
.
ÜÜP Q!
FirstOrDefaultAsync
ÜÜQ d
(
ÜÜd e
)
ÜÜe f
;
ÜÜf g
_logger
áá 
.
áá 
LogInformation
áá "
(
áá" #
$str
áá# Z
)
ááZ [
;
áá[ \
return
ââ 
user
ââ 
;
ââ 
}
ää 	
}
åå 
}éé ƒO
UD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Repositories\MasterCityRepository.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Repositories# /
{ 
public 

class  
MasterCityRepository %
:& '
BaseRepository( 6
<6 7

MasterCity7 A
>A B
,B C!
IMasterCityRepositoryD Y
{ 
private 
readonly 
ILogger  
_logger! (
;( )
	protected 
	Microsoft 
. 

Extensions &
.& '
Configuration' 4
.4 5
IConfiguration5 C
_configurationD R
;R S
private 
string 
_dbConnection $
;$ %
private 
IRepository 
< 

MasterCity &
>& '
_repository( 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public  
MasterCityRepository #
(# $
ValuationDbContext$ 6
	dbContext7 @
,@ A
ILoggerB I
<I J

MasterCityJ T
>T U
loggerV \
,\ ]
	Microsoft$ -
.- .

Extensions. 8
.8 9
Configuration9 F
.F G
IConfigurationG U
configurationV c
)c d
:" #
base$ (
(( )
	dbContext) 2
,2 3
logger4 :
): ;
{ 	
_logger   
=   
logger   
;   
_configuration&& 
=&& 
configuration&& *
;&&* +
_dbConnection'' 
='' 
_configuration'' *
[''* +
ApplicationHelper''+ <
.''< =
ConnectionStringkey''= P
]''P Q
;''Q R
}(( 	
public++ 
async++ 
Task++ 
<++ "
DataTableResponseModel++ 0
>++0 1
GetAll++2 8
(++8 9"
DataTableAjaxPostModel++9 O
model++P U
)++U V
{,, 	
var-- 
	_dbParams-- 
=-- 
new-- 
[--  
]--  !
{.. 
new// 
DbParameter//  
(//  !
$str//! )
,//) *
$num//+ ,
,//, -
	SqlDbType//- 6
.//6 7
Int//7 :
)//: ;
,//; <
new00 
DbParameter00  
(00  !
$str00! +
,00+ ,
model00- 2
.002 3
length003 9
,009 :
	SqlDbType00; D
.00D E
Int00E H
)00H I
,00I J
new11 
DbParameter11  
(11  !
$str11! -
,11- .
model11/ 4
.114 5
start115 :
,11: ;
	SqlDbType11< E
.11E F
Int11F I
)11I J
,11J K
new22 
DbParameter22  
(22  !
$str22! .
,22. /
$str220 :
,22: ;
	SqlDbType22< E
.22E F
VarChar22F M
)22M N
,22N O
new33 
DbParameter33  
(33  !
$str33! .
,33. /
$num330 1
,331 2
	SqlDbType333 <
.33< =
Int33= @
)33@ A
}44 
;44 
int66 
_count66 
=66 
$num66 
;66 
var77 
lstStf77 
=77 
EltizamDBHelper77 (
.77( )2
&ExecuteMappedReaderWithOutputParameter77) O
<77O P
MasterCityEntity77P `
>77` a
(77a b
ProcedureMetastore77b t
.77t u#
usp_City_SearchAllList	77u ã
,
77ã å
_dbConnection99 
,99 
out99 
_count99  &
,99& '
CommandType99( 3
.993 4
StoredProcedure994 C
,99C D
	_dbParams99E N
)99N O
;99O P"
DataTableResponseModel<< "#
oDataTableResponseModel<<# :
=<<; <
new<<= @"
DataTableResponseModel<<A W
(<<W X
model<<X ]
.<<] ^
draw<<^ b
,<<b c
_count<<d j
,<<j k
$num<<l m
,<<m n
lstStf<<o u
)<<u v
;<<v w
return>> #
oDataTableResponseModel>> *
;>>* +
}?? 	
public@@ 
async@@ 
Task@@ 
<@@ 

MasterCity@@ $
>@@$ %
GetById@@& -
(@@- .
int@@. 1
id@@2 4
)@@4 5
{AA 	
varBB 
ddBB 
=BB 
awaitBB 
_repositoryBB &
.BB& '
GetAsyncBB' /
(BB/ 0
idBB0 2
)BB2 3
;BB3 4
returnCC 
ddCC 
;CC 
}DD 	
publicEE 
asyncEE 
TaskEE 
<EE 
DBOperationEE %
>EE% &
UpsertEE' -
(EE- .
MasterCityEntityEE. >

entityCityEE? I
)EEI J
{FF 	

MasterCityGG 
objCityGG 
;GG 
ifII 
(II 

entityCityII 
.II 
IdII 
>II 
$numII  !
)II! "
{JJ 
objCityKK 
=KK 
_repositoryKK %
.KK% &
GetKK& )
(KK) *

entityCityKK* 4
.KK4 5
IdKK5 7
)KK7 8
;KK8 9
varLL 

OldObjCityLL 
=LL  
objCityLL! (
;LL( )
ifMM 
(MM 
objCityMM 
!=MM 
nullMM #
)MM# $
{NN 
objCityOO 
.OO 
CityNameOO $
=OO% &

entityCityOO' 1
.OO1 2
CityNameOO2 :
;OO: ;
objCityPP 
.PP 
	CountryIdPP %
=PP& '

entityCityPP( 2
.PP2 3
	CountryIdPP3 <
;PP< =
objCityQQ 
.QQ 
StateIdQQ #
=QQ$ %

entityCityQQ& 0
.QQ0 1
StateIdQQ1 8
;QQ8 9
objCityRR 
.RR 
StdcodeRR #
=RR$ %

entityCityRR& 0
.RR0 1
STDCodeRR1 8
;RR8 9
objCitySS 
.SS 
IsActiveSS $
=SS% &

entityCitySS' 1
.SS1 2
IsActiveSS2 :
;SS: ;
objCityTT 
.TT 
ModifiedDateTT (
=TT) *
AppConstantsTT+ 7
.TT7 8
DateTimeTT8 @
;TT@ A
objCityUU 
.UU 

ModifiedByUU &
=UU' (

entityCityUU) 3
.UU3 4
	CreatedByUU4 =
;UU= >
_repositoryVV 
.VV  
UpdateAsyncVV  +
(VV+ ,
objCityVV, 3
)VV3 4
;VV4 5
}WW 
elseXX 
{YY 
returnZZ 
DBOperationZZ &
.ZZ& '
NotFoundZZ' /
;ZZ/ 0
}[[ 
}\\ 
else]] 
{^^ 
objCity__ 
=__ 
new__ 

MasterCity__ (
(__( )
)__) *
;__* +
objCityaa 
.aa 
CityNameaa  
=aa! "

entityCityaa# -
.aa- .
CityNameaa. 6
;aa6 7
objCitybb 
.bb 
	CountryIdbb !
=bb" #

entityCitybb$ .
.bb. /
	CountryIdbb/ 8
;bb8 9
objCitycc 
.cc 
StateIdcc 
=cc  !

entityCitycc" ,
.cc, -
StateIdcc- 4
;cc4 5
objCitydd 
.dd 
Stdcodedd 
=dd  !

entityCitydd" ,
.dd, -
STDCodedd- 4
;dd4 5
objCityee 
.ee 
IsActiveee  
=ee! "

entityCityee# -
.ee- .
IsActiveee. 6
;ee6 7
objCityff 
.ff 
CreatedDateff #
=ff$ %
AppConstantsff& 2
.ff2 3
DateTimeff3 ;
;ff; <
objCitygg 
.gg 
	CreatedBygg !
=gg" #

entityCitygg$ .
.gg. /
	CreatedBygg/ 8
;gg8 9
objCityhh 
.hh 
ModifiedDatehh $
=hh% &
AppConstantshh' 3
.hh3 4
DateTimehh4 <
;hh< =
objCityii 
.ii 

ModifiedByii "
=ii# $

entityCityii% /
.ii/ 0
	CreatedByii0 9
;ii9 :
_repositoryjj 
.jj 
AddAsyncjj $
(jj$ %
objCityjj% ,
)jj, -
;jj- .
}kk 
ifnn 
(nn 
objCitynn 
.nn 
Idnn 
==nn 
$numnn 
)nn  
returnoo 
DBOperationoo "
.oo" #
Erroroo# (
;oo( )
returnqq 
DBOperationqq 
.qq 
Successqq &
;qq& '
}rr 	
publictt 
asynctt 
Tasktt 
<tt 
DBOperationtt %
>tt% &
Deletett' -
(tt- .
inttt. 1
idtt2 4
)tt4 5
{uu 	
varvv 

entityCityvv 
=vv 
_repositoryvv (
.vv( )
Getvv) ,
(vv, -
xvv- .
=>vv/ 1
xvv2 3
.vv3 4
Idvv4 6
==vv7 9
idvv: <
)vv< =
;vv= >
ifxx 
(xx 

entityCityxx 
==xx 
nullxx "
)xx" #
returnyy 
DBOperationyy "
.yy" #
NotFoundyy# +
;yy+ ,
_repository{{ 
.{{ 
Remove{{ 
({{ 

entityCity{{ )
){{) *
;{{* +
return 
DBOperation 
. 
Success &
;& '
}
ÄÄ 	
}
ÅÅ 
}ÇÇ Ó
RD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Repositories\MessageRepository.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Repositories# /
{ 
}   ë
WD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\Repositories\RefreshTokenRepository.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
." #
Repositories# /
{		 
public

 

class

 "
RefreshTokenRepository

 '
:

' (
BaseRepository

* 8
<

8 9
RefreshToken

9 E
>

E F
,

F G#
IRefreshTokenRepository

H _
{ 
private 
readonly 
ILogger  
_logger! (
;( )
private 
string 
_dbConnection $
;$ %
	protected 
IConfiguration  
_configuration! /
;/ 0
public "
RefreshTokenRepository %
(% &
ValuationDbContext& 8
	dbContext9 B
,B C
ILoggerD K
<K L
RefreshTokenL X
>X Y
loggerZ `
,` a
IConfigurationb p
configurationq ~
)~ 
:
Ä Å
base
Ç Ü
(
Ü á
	dbContext
á ê
,
ê ë
logger
í ò
)
ò ô
{ 	
_logger 
= 
logger 
; 
_configuration 
= 
configuration *
;* +
_dbConnection 
= 
_configuration *
[* +
ApplicationHelper+ <
.< =
ConnectionStringkey= P
]P Q
;Q R
} 	
public 
async 
Task 
< 
RefreshToken &
>& '"
GetRefreshTokenByToken( >
(> ?
string? E
tokenF K
)K L
{ 	
DbParameter 
[ 
] 
dbParameters &
=' (
{) *
new 
DbParameter 
(  
$str  '
,' (
token) .
,. /
FieldTypeEnum0 =
.= >
FieldTypeVarchar> N
)N O
}   
;   
var"" 
refreshToken"" 
="" 

FJDBHelper"" )
."") *
ExecuteMappedReader""* =
<""= >
RefreshToken""> J
>""J K
(""K L
SQLMetaStore""L X
.""X Y*
RefreshToken_GetDetailsbyToken""Y w
,""w x
_dbConnection	""y Ü
,
""Ü á
CommandType## #
.### $
StoredProcedure##$ 3
,##3 4
dbParameters##5 A
)##A B
.##B C
FirstOrDefault##C Q
(##Q R
)##R S
;##S T
_logger%% 
.%% 
LogInformation%% "
(%%" #
$str%%# b
)%%b c
;%%c d
return'' 
refreshToken'' 
;''  
}(( 	
})) 
}** ˙ú
FD:\EltizamLive\Eltizam.WebApi\src\Infrastructure\ValuationDbContext.cs
	namespace 	
ValuationWeb
 
. 
Persistence "
{		 
public

 

partial

 
class

 
ValuationDbContext

 +
:

, -
	DbContext

. 7
{ 
public 
ValuationDbContext !
(! "
)" #
{ 	
} 	
public 
ValuationDbContext !
(! "
DbContextOptions" 2
<2 3
ValuationDbContext3 E
>E F
optionsG N
)N O
: 
base 
( 
options 
) 
{ 	
} 	
public 
virtual 
DbSet 
< 
Branch #
># $
Branches% -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
=< =
null> B
!B C
;C D
public 
virtual 
DbSet 
< 

MasterCity '
>' (
MasterCities) 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
=D E
nullF J
!J K
;K L
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
UseCollation %
(% &
$str& >
)> ?
;? @
modelBuilder 
. 
Entity 
<  

MasterCity  *
>* +
(+ ,
entity, 2
=>3 5
{ 
entity 
. 
ToTable 
( 
$str ,
,, -
$str. 3
)3 4
;4 5
entity   
.   
Property   
(    
e    !
=>  " $
e  % &
.  & '
CityName  ' /
)  / 0
.!! 
HasMaxLength!! !
(!!! "
$num!!" %
)!!% &
."" 
	IsUnicode"" 
("" 
false"" $
)""$ %
;""% &
entity$$ 
.$$ 
Property$$ 
($$  
e$$  !
=>$$" $
e$$% &
.$$& '
CreatedDate$$' 2
)$$2 3
.$$3 4
HasColumnType$$4 A
($$A B
$str$$B L
)$$L M
;$$M N
entity&& 
.&& 
Property&& 
(&&  
e&&  !
=>&&" $
e&&% &
.&&& '
ModifiedDate&&' 3
)&&3 4
.&&4 5
HasColumnType&&5 B
(&&B C
$str&&C M
)&&M N
;&&N O
entity(( 
.(( 
Property(( 
(((  
e((  !
=>((" $
e((% &
.((& '
Stdcode((' .
)((. /
.)) 
HasMaxLength)) !
())! "
$num))" $
)))$ %
.** 
	IsUnicode** 
(** 
false** $
)**$ %
.++ 
HasColumnName++ "
(++" #
$str++# ,
)++, -
;++- .
},, 
),, 
;,, 
modelBuilder.. 
... 
Entity.. 
<..  
Branch..  &
>..& '
(..' (
entity..( .
=>../ 1
{// 
entity00 
.00 
ToTable00 
(00 
$str00 '
,00' (
$str00) .
)00. /
;00/ 0
entity22 
.22 
Property22 
(22  
e22  !
=>22" $
e22% &
.22& '

Accountant22' 1
)221 2
.222 3
HasMaxLength223 ?
(22? @
$num22@ C
)22C D
;22D E
entity44 
.44 
Property44 
(44  
e44  !
=>44" $
e44% &
.44& '
AccountantPost44' 5
)445 6
.446 7
HasMaxLength447 C
(44C D
$num44D G
)44G H
;44H I
entity66 
.66 
Property66 
(66  
e66  !
=>66" $
e66% &
.66& '
Address66' .
)66. /
.66/ 0
HasMaxLength660 <
(66< =
$num66= @
)66@ A
;66A B
entity88 
.88 
Property88 
(88  
e88  !
=>88" $
e88% &
.88& '
BankCode88' /
)88/ 0
.99 
HasMaxLength99 !
(99! "
$num99" $
)99$ %
.:: 
	IsUnicode:: 
(:: 
false:: $
)::$ %
;::% &
entity<< 
.<< 
Property<< 
(<<  
e<<  !
=><<" $
e<<% &
.<<& '
	CloseDate<<' 0
)<<0 1
.<<1 2
HasColumnType<<2 ?
(<<? @
$str<<@ F
)<<F G
;<<G H
entity>> 
.>> 
Property>> 
(>>  
e>>  !
=>>>" $
e>>% &
.>>& '
JurName>>' .
)>>. /
.>>/ 0
HasMaxLength>>0 <
(>>< =
$num>>= @
)>>@ A
;>>A B
entity@@ 
.@@ 
Property@@ 
(@@  
e@@  !
=>@@" $
e@@% &
.@@& '
License@@' .
)@@. /
.@@/ 0
HasMaxLength@@0 <
(@@< =
$num@@= ?
)@@? @
;@@@ A
entityBB 
.BB 
PropertyBB 
(BB  
eBB  !
=>BB" $
eBB% &
.BB& '
ManagerBB' .
)BB. /
.BB/ 0
HasMaxLengthBB0 <
(BB< =
$numBB= @
)BB@ A
;BBA B
entityDD 
.DD 
PropertyDD 
(DD  
eDD  !
=>DD" $
eDD% &
.DD& '
ManagerPostDD' 2
)DD2 3
.DD3 4
HasMaxLengthDD4 @
(DD@ A
$numDDA D
)DDD E
;DDE F
entityFF 
.FF 
PropertyFF 
(FF  
eFF  !
=>FF" $
eFF% &
.FF& '
ModifiedFF' /
)FF/ 0
.GG 
HasPrecisionGG !
(GG! "
$numGG" #
)GG# $
.HH 
HasDefaultValueSqlHH '
(HH' (
$strHH( 5
)HH5 6
;HH6 7
entityJJ 
.JJ 
PropertyJJ 
(JJ  
eJJ  !
=>JJ" $
eJJ% &
.JJ& '
NameJJ' +
)JJ+ ,
.JJ, -
HasMaxLengthJJ- 9
(JJ9 :
$numJJ: =
)JJ= >
;JJ> ?
entityLL 
.LL 
PropertyLL 
(LL  
eLL  !
=>LL" $
eLL% &
.LL& '
	NameShortLL' 0
)LL0 1
.LL1 2
HasMaxLengthLL2 >
(LL> ?
$numLL? A
)LLA B
;LLB C
entityNN 
.NN 
PropertyNN 
(NN  
eNN  !
=>NN" $
eNN% &
.NN& '
OpenDateNN' /
)NN/ 0
.NN0 1
HasColumnTypeNN1 >
(NN> ?
$strNN? E
)NNE F
;NNF G
entityPP 
.PP 
PropertyPP 
(PP  
ePP  !
=>PP" $
ePP% &
.PP& '
PhonePP' ,
)PP, -
.PP- .
HasMaxLengthPP. :
(PP: ;
$numPP; =
)PP= >
;PP> ?
entityRR 
.RR 
PropertyRR 
(RR  
eRR  !
=>RR" $
eRR% &
.RR& '
UserRR' +
)RR+ ,
.SS 
HasMaxLengthSS !
(SS! "
$numSS" $
)SS$ %
.TT 
	IsUnicodeTT 
(TT 
falseTT $
)TT$ %
;TT% &
entityVV 
.VV 
PropertyVV 
(VV  
eVV  !
=>VV" $
eVV% &
.VV& '
WarrantVV' .
)VV. /
.VV/ 0
HasMaxLengthVV0 <
(VV< =
$numVV= ?
)VV? @
;VV@ A
}WW 
)WW 
;WW 
modelBuilderYY 
.YY 
EntityYY 
<YY  
RefreshTokenYY  ,
>YY, -
(YY- .
entityYY. 4
=>YY5 7
{ZZ 
entity[[ 
.[[ 
HasKey[[ 
([[ 
e[[ 
=>[[  "
new[[# &
{[[' (
e[[) *
.[[* +
UserId[[+ 1
,[[1 2
e[[3 4
.[[4 5
Id[[5 7
}[[8 9
)[[9 :
.\\ 
HasName\\ 
(\\ 
$str\\ 0
)\\0 1
;\\1 2
entity^^ 
.^^ 
ToTable^^ 
(^^ 
$str^^ -
,^^- .
$str^^/ 4
)^^4 5
;^^5 6
entity`` 
.`` 
Property`` 
(``  
e``  !
=>``" $
e``% &
.``& '
Id``' )
)``) *
.``* +
ValueGeneratedOnAdd``+ >
(``> ?
)``? @
;``@ A
entitybb 
.bb 
HasOnebb 
(bb 
dbb 
=>bb  "
dbb# $
.bb$ %
Userbb% )
)bb) *
.cc 
WithManycc 
(cc 
pcc 
=>cc  "
pcc# $
.cc$ %
RefreshTokenscc% 2
)cc2 3
.dd 
HasForeignKeydd "
(dd" #
ddd# $
=>dd% '
ddd( )
.dd) *
UserIddd* 0
)dd0 1
.ee 
HasConstraintNameee &
(ee& '
$stree' =
)ee= >
;ee> ?
}ff 
)ff 
;ff 
modelBuilderhh 
.hh 
Entityhh 
<hh  
Userhh  $
>hh$ %
(hh% &
entityhh& ,
=>hh- /
{ii 
entityjj 
.jj 
ToTablejj 
(jj 
$strjj %
,jj% &
$strjj' ,
)jj, -
;jj- .
entityll 
.ll 
HasIndexll 
(ll  
ell  !
=>ll" $
ell% &
.ll& '
UserNamell' /
,ll/ 0
$strll1 ;
)ll; <
.mm 
IsUniquemm 
(mm 
)mm 
;mm  
entityoo 
.oo 
Propertyoo 
(oo  
eoo  !
=>oo" $
eoo% &
.oo& '
Addressoo' .
)oo. /
.pp 
HasMaxLengthpp !
(pp! "
$numpp" %
)pp% &
.qq 
	IsUnicodeqq 
(qq 
falseqq $
)qq$ %
;qq% &
entityss 
.ss 
Propertyss 
(ss  
ess  !
=>ss" $
ess% &
.ss& ' 
AllowTemplateTestingss' ;
)ss; <
.ss< =
HasDefaultValueSqlss= O
(ssO P
$strssP W
)ssW X
;ssX Y
entityuu 
.uu 
Propertyuu 
(uu  
euu  !
=>uu" $
euu% &
.uu& '
	CloseDateuu' 0
)uu0 1
.uu1 2
HasColumnTypeuu2 ?
(uu? @
$struu@ F
)uuF G
;uuG H
entityww 
.ww 
Propertyww 
(ww  
eww  !
=>ww" $
eww% &
.ww& '
Descriptionww' 2
)ww2 3
.ww3 4
HasMaxLengthww4 @
(ww@ A
$numwwA D
)wwD E
;wwE F
entityyy 
.yy 
Propertyyy 
(yy  
eyy  !
=>yy" $
eyy% &
.yy& '
Emailyy' ,
)yy, -
.zz 
HasMaxLengthzz !
(zz! "
$numzz" %
)zz% &
.{{ 
	IsUnicode{{ 
({{ 
false{{ $
){{$ %
;{{% &
entity}} 
.}} 
Property}} 
(}}  
e}}  !
=>}}" $
e}}% &
.}}& '
EmployeeNum}}' 2
)}}2 3
.~~ 
HasMaxLength~~ !
(~~! "
$num~~" $
)~~$ %
. 
	IsUnicode 
( 
false $
)$ %
;% &
entity
ÅÅ 
.
ÅÅ 
Property
ÅÅ 
(
ÅÅ  
e
ÅÅ  !
=>
ÅÅ" $
e
ÅÅ% &
.
ÅÅ& '
	FirstName
ÅÅ' 0
)
ÅÅ0 1
.
ÇÇ 
HasMaxLength
ÇÇ !
(
ÇÇ! "
$num
ÇÇ" $
)
ÇÇ$ %
.
ÉÉ 
	IsUnicode
ÉÉ 
(
ÉÉ 
false
ÉÉ $
)
ÉÉ$ %
;
ÉÉ% &
entity
ÖÖ 
.
ÖÖ 
Property
ÖÖ 
(
ÖÖ  
e
ÖÖ  !
=>
ÖÖ" $
e
ÖÖ% &
.
ÖÖ& '!
ForgotPasswordToken
ÖÖ' :
)
ÖÖ: ;
.
ÜÜ 
HasMaxLength
ÜÜ !
(
ÜÜ! "
$num
ÜÜ" %
)
ÜÜ% &
.
áá 
	IsUnicode
áá 
(
áá 
false
áá $
)
áá$ %
;
áá% &
entity
ââ 
.
ââ 
Property
ââ 
(
ââ  
e
ââ  !
=>
ââ" $
e
ââ% &
.
ââ& '
Gender
ââ' -
)
ââ- .
.
ää 
HasMaxLength
ää !
(
ää! "
$num
ää" #
)
ää# $
.
ãã 
	IsUnicode
ãã 
(
ãã 
false
ãã $
)
ãã$ %
.
åå 
IsFixedLength
åå "
(
åå" #
)
åå# $
;
åå$ %
entity
éé 
.
éé 
Property
éé 
(
éé  
e
éé  !
=>
éé" $
e
éé% &
.
éé& '
LastLoginDate
éé' 4
)
éé4 5
.
éé5 6
HasPrecision
éé6 B
(
ééB C
$num
ééC D
)
ééD E
;
ééE F
entity
êê 
.
êê 
Property
êê 
(
êê  
e
êê  !
=>
êê" $
e
êê% &
.
êê& '
LastLoginIp
êê' 2
)
êê2 3
.
ëë 
HasMaxLength
ëë !
(
ëë! "
$num
ëë" $
)
ëë$ %
.
íí 
	IsUnicode
íí 
(
íí 
false
íí $
)
íí$ %
.
ìì 
HasColumnName
ìì "
(
ìì" #
$str
ìì# 0
)
ìì0 1
;
ìì1 2
entity
ïï 
.
ïï 
Property
ïï 
(
ïï  
e
ïï  !
=>
ïï" $
e
ïï% &
.
ïï& '
LastLoginMachine
ïï' 7
)
ïï7 8
.
ññ 
HasMaxLength
ññ !
(
ññ! "
$num
ññ" $
)
ññ$ %
.
óó 
	IsUnicode
óó 
(
óó 
false
óó $
)
óó$ %
;
óó% &
entity
ôô 
.
ôô 
Property
ôô 
(
ôô  
e
ôô  !
=>
ôô" $
e
ôô% &
.
ôô& '
LastName
ôô' /
)
ôô/ 0
.
öö 
HasMaxLength
öö !
(
öö! "
$num
öö" $
)
öö$ %
.
õõ 
	IsUnicode
õõ 
(
õõ 
false
õõ $
)
õõ$ %
;
õõ% &
entity
ùù 
.
ùù 
Property
ùù 
(
ùù  
e
ùù  !
=>
ùù" $
e
ùù% &
.
ùù& '
Mobile
ùù' -
)
ùù- .
.
ûû 
HasMaxLength
ûû !
(
ûû! "
$num
ûû" $
)
ûû$ %
.
üü 
	IsUnicode
üü 
(
üü 
false
üü $
)
üü$ %
;
üü% &
entity
°° 
.
°° 
Property
°° 
(
°°  
e
°°  !
=>
°°" $
e
°°% &
.
°°& '
Mobile2
°°' .
)
°°. /
.
¢¢ 
HasMaxLength
¢¢ !
(
¢¢! "
$num
¢¢" $
)
¢¢$ %
.
££ 
	IsUnicode
££ 
(
££ 
false
££ $
)
££$ %
;
££% &
entity
•• 
.
•• 
Property
•• 
(
••  
e
••  !
=>
••" $
e
••% &
.
••& '
Name
••' +
)
••+ ,
.
••, -
HasMaxLength
••- 9
(
••9 :
$num
••: =
)
••= >
;
••> ?
entity
ßß 
.
ßß 
Property
ßß 
(
ßß  
e
ßß  !
=>
ßß" $
e
ßß% &
.
ßß& '
OpenDate
ßß' /
)
ßß/ 0
.
ßß0 1
HasColumnType
ßß1 >
(
ßß> ?
$str
ßß? E
)
ßßE F
;
ßßF G
entity
©© 
.
©© 
Property
©© 
(
©©  
e
©©  !
=>
©©" $
e
©©% &
.
©©& '
Password
©©' /
)
©©/ 0
.
™™ 
HasMaxLength
™™ !
(
™™! "
$num
™™" %
)
™™% &
.
´´ 
	IsUnicode
´´ 
(
´´ 
false
´´ $
)
´´$ %
;
´´% &
entity
≠≠ 
.
≠≠ 
Property
≠≠ 
(
≠≠  
e
≠≠  !
=>
≠≠" $
e
≠≠% &
.
≠≠& '$
PasswordExpirationDate
≠≠' =
)
≠≠= >
.
≠≠> ?
HasColumnType
≠≠? L
(
≠≠L M
$str
≠≠M S
)
≠≠S T
;
≠≠T U
entity
ØØ 
.
ØØ 
Property
ØØ 
(
ØØ  
e
ØØ  !
=>
ØØ" $
e
ØØ% &
.
ØØ& '
Prefix
ØØ' -
)
ØØ- .
.
∞∞ 
HasMaxLength
∞∞ !
(
∞∞! "
$num
∞∞" #
)
∞∞# $
.
±± 
	IsUnicode
±± 
(
±± 
false
±± $
)
±±$ %
;
±±% &
entity
≥≥ 
.
≥≥ 
Property
≥≥ 
(
≥≥  
e
≥≥  !
=>
≥≥" $
e
≥≥% &
.
≥≥& '
State
≥≥' ,
)
≥≥, -
.
≥≥- . 
HasDefaultValueSql
≥≥. @
(
≥≥@ A
$str
≥≥A H
)
≥≥H I
;
≥≥I J
entity
µµ 
.
µµ 
Property
µµ 
(
µµ  
e
µµ  !
=>
µµ" $
e
µµ% &
.
µµ& '
UserName
µµ' /
)
µµ/ 0
.
∂∂ 
HasMaxLength
∂∂ !
(
∂∂! "
$num
∂∂" $
)
∂∂$ %
.
∑∑ 
	IsUnicode
∑∑ 
(
∑∑ 
false
∑∑ $
)
∑∑$ %
;
∑∑% &
}
∏∏ 
)
∏∏ 
;
∏∏ 
modelBuilder
∫∫ 
.
∫∫ 
HasSequence
∫∫ $
(
∫∫$ %
$str
∫∫% 9
,
∫∫9 :
$str
∫∫; @
)
∫∫@ A
;
∫∫A B
modelBuilder
ºº 
.
ºº 
HasSequence
ºº $
(
ºº$ %
$str
ºº% 2
,
ºº2 3
$str
ºº4 9
)
ºº9 :
;
ºº: ;
modelBuilder
ææ 
.
ææ 
HasSequence
ææ $
<
ææ$ %
int
ææ% (
>
ææ( )
(
ææ) *
$str
ææ* 8
,
ææ8 9
$str
ææ: ?
)
ææ? @
.
øø 
StartsAt
øø 
(
øø 
$num
øø 
)
øø 
.
¿¿ 
HasMin
¿¿ 
(
¿¿ 
$num
¿¿ 
)
¿¿ 
;
¿¿ 
modelBuilder
¬¬ 
.
¬¬ 
HasSequence
¬¬ $
(
¬¬$ %
$str
¬¬% 2
,
¬¬2 3
$str
¬¬4 9
)
¬¬9 :
;
¬¬: ;$
OnModelCreatingPartial
ƒƒ "
(
ƒƒ" #
modelBuilder
ƒƒ# /
)
ƒƒ/ 0
;
ƒƒ0 1
}
≈≈ 	
partial
«« 
void
«« $
OnModelCreatingPartial
«« +
(
««+ ,
ModelBuilder
««, 8
modelBuilder
««9 E
)
««E F
;
««F G
}
»» 
}…… 